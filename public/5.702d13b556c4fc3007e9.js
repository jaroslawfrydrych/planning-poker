(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{GM61:function(e,t,n){"use strict";n.r(t),n.d(t,"GuestModule",(function(){return Z}));var o=n("2kYt"),r=n("nIj0"),a=n("yDe4"),i=n("PCNd"),s=n("sEIs"),c=n("D57K"),u=n("IdLP"),b=n("l3rL"),d=n("QvUv"),l=n("jJz7"),h=n("9Q/O"),p=n("PdGU"),m=n("EM62"),g=n("M8cf"),f=h.a.ChooseCard,v=h.a.GuestGameInit,O=h.a.GetGameState,y=h.a.RemoveRoom,P=h.a.CloseRoom,C=h.a.GetRoomRemove;function j(e,t){if(1&e){const e=m.Qb();m.Nb(0),m.Pb(1,"planning-poker-card",3),m.Wb("cardClick",(function(){m.ic(e);const n=t.$implicit;return m.Yb().onCardClick(n)})),m.Zb(2,"async"),m.Ob(),m.Mb()}if(2&e){const e=t.$implicit,n=m.Yb();m.Ab(1),m.ec("card",e)("selectedCard",m.ac(2,2,n.card$))}}let w=(()=>{let e=class{constructor(e,t,n,o){this.router=e,this.actions$=t,this.store=n,this.environmentService=o}ngOnInit(){this.store.dispatch([new v,new O,new C]),this.cards=this.store.selectSnapshot(p.a.availableCards),this.actions$.pipe(Object(a.k)(y),Object(d.b)(this)).subscribe((()=>this.navigateToLadingPage()))}ngOnDestroy(){this.store.dispatch(P),this.navigateToLadingPage()}onCardClick(e){this.store.selectSnapshot(p.a.gameState)!==b.b.REVIEW&&this.store.dispatch(new f(e))}beforeUnloadHandler(){if(this.environmentService.production)return!1}navigateToLadingPage(){this.router.navigateByUrl("/")}};return e.\u0275fac=function(t){return new(t||e)(m.Kb(s.c),m.Kb(a.b),m.Kb(a.h),m.Kb(l.a))},e.\u0275cmp=m.Eb({type:e,selectors:[["planning-poker-game"]],hostBindings:function(e,t){1&e&&m.Wb("beforeunload",(function(){return t.beforeUnloadHandler()}),!1,m.hc)},decls:4,vars:1,consts:[[1,"cards"],[4,"ngFor","ngForOf"],[1,"sidebar"],[3,"card","selectedCard","cardClick"]],template:function(e,t){1&e&&(m.Pb(0,"div",0),m.lc(1,j,3,4,"ng-container",1),m.Ob(),m.Pb(2,"div",2),m.mc(3," TODO :)\n"),m.Ob()),2&e&&(m.Ab(1),m.ec("ngForOf",t.cards))},directives:[o.j,g.a],pipes:[o.b],styles:['[_nghost-%COMP%]{padding:1.6666666667em;display:flex;align-items:flex-start;width:100%;height:100%}.cards[_ngcontent-%COMP%]{display:flex;width:65%;flex-direction:row;flex-wrap:wrap}.cards[_ngcontent-%COMP%]   planning-poker-card[_ngcontent-%COMP%]{margin:1%}.sidebar[_ngcontent-%COMP%]{width:35%;padding:1.3888888889em}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:1.1111111111em 0;display:block}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0;padding:.1111111111em 0;display:block;list-style:none}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"- "}']}),Object(c.b)([Object(a.e)(p.a.card),Object(c.c)("design:type",u.a)],e.prototype,"card$",void 0),e=Object(c.b)([Object(d.a)()],e),e})();var k=n("8j5Y"),S=n("lQSW");let $=(()=>{class e{constructor(e,t,n){this.store=e,this.guestService=t,this.router=n}canActivate(){return this.store.select(p.a.hasRoomNumber).pipe(Object(k.a)((e=>{e||this.router.navigateByUrl("/")})))}}return e.\u0275fac=function(t){return new(t||e)(m.Tb(a.h),m.Tb(S.a),m.Tb(s.c))},e.\u0275prov=m.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var R=h.a.SetRoomInfo;let G=(()=>{class e{constructor(e,t){this.guestService=e,this.store=t}resolve(){return this.guestService.getRoomInfo(this.store.selectSnapshot(p.a.roomNumber)).pipe(Object(k.a)((e=>this.store.dispatch(new R(e)))))}}return e.\u0275fac=function(t){return new(t||e)(m.Tb(S.a),m.Tb(a.h))},e.\u0275prov=m.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var I=n("C05f"),M=n("ruxD"),N=n("cJ9h"),T=n("BwBJ"),B=n("ur7N"),_=n("PKRn"),x=n("rqBn"),K=n("6EaX"),A=n("hi3J"),E=h.a.RoomNumberValidation,L=h.a.GuestRoomNumberValidationInit;let U=(()=>{let e=class{constructor(e,t,n,o){this.router=e,this.store=t,this.$gaService=n,this.activatedRoute=o,this.queryRoomCode=null,this.loadingSubject$=new I.a(!1),this.successSubject$=new I.a(!1),this.errorSubject$=new I.a(!1),this.loading$=this.loadingSubject$.asObservable(),this.success$=this.successSubject$.asObservable(),this.error$=this.errorSubject$.asObservable()}ngOnInit(){this.store.dispatch(new L),this.handleQueryParams()}onRoomNumberSubmit(e){this.loadingSubject$.getValue()||(this.loadingSubject$.next(!0),this.store.dispatch(new E(e)).pipe(Object(M.a)((()=>this.loadingSubject$.next(!1))),Object(N.a)((()=>this.store.select(p.a.isRoomNumberValid))),Object(k.a)((e=>{e?this.successSubject$.next(!0):this.errorSubject$.next(!0)})),Object(T.a)(1e3),Object(k.a)((()=>this.errorSubject$.next(!1))),Object(d.b)(this)).subscribe((e=>this.handleRoomNumberValidation(e))))}handleRoomNumberValidation(e){e?this.router.navigateByUrl("/guest/your-name"):this.codeComponent.reset()}handleQueryParams(){const e=this.activatedRoute.snapshot.queryParams;e.code&&(this.queryRoomCode=e.code)}};return e.\u0275fac=function(t){return new(t||e)(m.Kb(s.c),m.Kb(a.h),m.Kb(_.a),m.Kb(s.a))},e.\u0275cmp=m.Eb({type:e,selectors:[["planning-poker-room-code"]],viewQuery:function(e,t){var n;1&e&&m.pc(B.a,!0),2&e&&m.fc(n=m.Xb())&&(t.codeComponent=n.first)},decls:6,vars:5,consts:[[3,"codeLength","value","isLoading$","isSuccess$","isError$","codeSubmit"]],template:function(e,t){1&e&&(m.Pb(0,"planning-poker-layout"),m.Pb(1,"planning-poker-header"),m.Pb(2,"h1"),m.mc(3,"Join to exsiting room"),m.Ob(),m.Ob(),m.Pb(4,"planning-poker-content"),m.Pb(5,"planning-poker-code",0),m.Wb("codeSubmit",(function(e){return t.onRoomNumberSubmit(e)})),m.Ob(),m.Ob(),m.Ob()),2&e&&(m.Ab(5),m.ec("codeLength",5)("value",t.queryRoomCode)("isLoading$",t.loading$)("isSuccess$",t.success$)("isError$",t.error$))},directives:[x.a,K.a,A.a,B.a],styles:[""],changeDetection:0}),e=Object(c.b)([Object(d.a)()],e),e})();var J=n("YtkY");let D=(()=>{class e{constructor(e,t){this.store=e,this.router=t}canActivate(){return this.store.select(p.a.hasRoomNumber).pipe(Object(J.a)((e=>!e||(this.router.navigateByUrl("/"),!1))))}}return e.\u0275fac=function(t){return new(t||e)(m.Tb(a.h),m.Tb(s.c))},e.\u0275prov=m.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var F=n("dN4T"),Q=n("sRyt"),V=n("d7z7"),W=n("M0Hd"),Y=n("W79N"),q=h.a.JoinRoom,H=h.a.GuestNameInit;const z=[{path:"room-code",component:U,canActivate:[D],data:{animation:"RoomCodeComponent"}},{path:"your-name",component:(()=>{class e{constructor(e,t,n){this.formBuilder=e,this.router=t,this.store=n}ngOnInit(){this.store.dispatch(new H),this.formGroup=this.formBuilder.group({name:this.formBuilder.control(null,[r.j.required])})}get nameFormControl(){return this.formGroup.get("name")}submit(){this.formGroup.valid&&this.store.dispatch(new q(this.nameFormControl.value)).pipe(Object(d.b)(this)).subscribe((()=>this.router.navigateByUrl("/guest/game")))}}return e.\u0275fac=function(t){return new(t||e)(m.Kb(r.b),m.Kb(s.c),m.Kb(a.h))},e.\u0275cmp=m.Eb({type:e,selectors:[["planning-poker-your-name"]],decls:11,vars:1,consts:[[3,"formGroup"],["type","text","formControlName","name","planningPokerFocus","","planningPokerInput",""],["planningPokerButton","",3,"click"]],template:function(e,t){1&e&&(m.Pb(0,"planning-poker-layout"),m.Pb(1,"planning-poker-header"),m.Pb(2,"h1"),m.mc(3,"Introduce yourself"),m.Ob(),m.Ob(),m.Pb(4,"planning-poker-content"),m.Pb(5,"planning-poker-form-container"),m.Pb(6,"form",0),m.Lb(7,"input",1),m.Pb(8,"button",2),m.Wb("click",(function(){return t.submit()})),m.Pb(9,"planning-poker-icon"),m.mc(10," arrow_forward "),m.Ob(),m.Ob(),m.Ob(),m.Ob(),m.Ob(),m.Ob()),2&e&&(m.Ab(6),m.ec("formGroup",t.formGroup))},directives:[x.a,K.a,A.a,F.a,r.k,r.h,r.e,r.a,r.g,r.d,Q.a,V.a,W.a,Y.a],styles:[""],changeDetection:0}),e})(),canActivate:[(()=>{class e{constructor(e,t){this.store=e,this.router=t}canActivate(){return this.store.select(p.a.hasRoomNumber).pipe(Object(k.a)((e=>{e||this.router.navigateByUrl("/")})))}}return e.\u0275fac=function(t){return new(t||e)(m.Tb(a.h),m.Tb(s.c))},e.\u0275prov=m.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()],data:{animation:"YourNameComponent"}},{path:"game",component:w,canActivate:[$],resolve:{data:G},data:{animation:"GameComponent"}},{path:"**",redirectTo:"room-code"}];let X=(()=>{class e{}return e.\u0275mod=m.Ib({type:e}),e.\u0275inj=m.Hb({factory:function(t){return new(t||e)},imports:[[s.d.forChild(z)],s.d]}),e})(),Z=(()=>{class e{}return e.\u0275mod=m.Ib({type:e}),e.\u0275inj=m.Hb({factory:function(t){return new(t||e)},imports:[[o.c,X,i.a,r.i,a.d.forFeature([p.a])]]}),e})()}}]);