(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"1FB5":function(t,e,o){"use strict";o.r(e),o.d(e,"HostModule",(function(){return mt}));var n=o("2kYt"),i=o("yDe4"),c=o("PCNd"),a=o("sEIs"),r=o("D57K"),s=o("C05f"),b=o("IdLP"),l=o("Efrr"),d=o("FU6l");function u(t){const{subscriber:e,counter:o,period:n}=t;e.next(o),this.schedule({subscriber:e,counter:o+1,period:n},n)}var p=o("5uGe");class m{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new g(t,this.dueTime,this.scheduler))}}class g extends p.a{constructor(t,e,o){super(t),this.dueTime=e,this.scheduler=o,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(h,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function h(t){t.debouncedNext()}var O=o("xVbo"),f=o("jIqt"),y=o("YtkY"),j=o("l3rL"),v=o("ybPn"),C=o("QvUv"),S=o("EM62");let P=(()=>{class t{copyText(t){const e=this.createInputElement();e.style.opacity="0",e.style["text-indent"]="-9999px",document.body.appendChild(e),this.setInputValue(e,t),this.selectInput(e),document.execCommand("copy"),this.removeElement(e)}createInputElement(){return document.createElement("input")}selectInput(t){t.select(),t.setSelectionRange(0,99999)}setInputValue(t,e){t.value=e}removeElement(t){t.blur(),t.remove()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var M,w=o("jJz7");!function(t){class e{}e.type="[HostActions] Host board initialization",t.HostBoardInit=e;class o{}o.type="[HostActions] Create room",t.CreateRoom=o;class n{}n.type="[HostActions] Toggle Game State",t.ToggleGameState=n;class i{}i.type="[HostActions] Join room",t.JoinRoom=i;class c{}c.type="[HostActions] Get players",t.GetPlayers=c;class a{}a.type="[HostActions] Get game state",t.GetGameState=a;class r{}r.type="[HostActions] Copy room link",t.CopyRoomLink=r;class s{}s.type="[HostActions] Close room",t.CloseRoom=s}(M||(M={}));var k=o("8j5Y"),x=o("cJ9h"),_=o("kuMc"),R=o("PJjB");let T=(()=>{class t{constructor(t){this.pokerService=t}createRoom(){return this.pokerService.createRoom()}joinRoom(t){this.pokerService.joinRoom(t,j.d.HOST)}getUsers(){return this.pokerService.getUsers()}getGameState(){return this.pokerService.getGameState()}toggleGameState(t){return this.pokerService.toggleGameState(t)}closeRoom(t){this.pokerService.closeRoom(t)}}return t.\u0275fac=function(e){return new(e||t)(S.Tb(R.a))},t.\u0275prov=S.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var A=o("PKRn"),G=M.CloseRoom,N=M.CreateRoom,$=M.GetGameState,I=M.GetPlayers,H=M.JoinRoom,V=M.ToggleGameState,F=M.HostBoardInit,E=M.CopyRoomLink;let L=(()=>{let t=class{constructor(t,e,o){this.hostService=t,this.$gaService=e,this.actions$=o}static gameState(t){return t.gameState}static roomNumber(t){return t.roomNumber}static players(t){return t.players}hostBoardInit(){this.$gaService.pageView("/host/board")}createRoom(t){return this.hostService.createRoom().pipe(Object(k.a)((e=>{const o=t.getState();t.setState(Object.assign(Object.assign({},o),{roomNumber:e.id,gameState:e.gameState}))})),Object(x.a)((()=>t.dispatch(new H))))}toggleHostState(t){this.$gaService.event("toggle_game_state","host","Toggle game state");const e=t.getState();this.hostService.toggleGameState(e.roomNumber)}joinRoom(t){const e=t.getState();this.hostService.joinRoom(e.roomNumber)}getUsers(t){this.hostService.getUsers().pipe(Object(_.a)(this.actions$.pipe(Object(i.j)(G)))).subscribe((e=>{t.patchState({players:e})}))}getGameState(t){this.hostService.getGameState().pipe(Object(_.a)(this.actions$.pipe(Object(i.j)(G)))).subscribe((e=>{t.patchState({gameState:e})}))}copyRoomLink(){this.$gaService.event("copy_room_link","host","Copy room link")}closeRoom(t){const e=t.getState();this.$gaService.event("close_room","host","Close room"),this.hostService.closeRoom(e.roomNumber)}};return t.\u0275fac=function(e){return new(e||t)(S.Tb(T),S.Tb(A.a),S.Tb(i.b))},t.\u0275prov=S.Gb({token:t,factory:t.\u0275fac}),Object(r.b)([Object(i.a)(F),Object(r.c)("design:type",Function),Object(r.c)("design:paramtypes",[]),Object(r.c)("design:returntype",void 0)],t.prototype,"hostBoardInit",null),Object(r.b)([Object(i.a)(N),Object(r.c)("design:type",Function),Object(r.c)("design:paramtypes",[Object]),Object(r.c)("design:returntype",b.a)],t.prototype,"createRoom",null),Object(r.b)([Object(i.a)(V),Object(r.c)("design:type",Function),Object(r.c)("design:paramtypes",[Object]),Object(r.c)("design:returntype",void 0)],t.prototype,"toggleHostState",null),Object(r.b)([Object(i.a)(H),Object(r.c)("design:type",Function),Object(r.c)("design:paramtypes",[Object]),Object(r.c)("design:returntype",void 0)],t.prototype,"joinRoom",null),Object(r.b)([Object(i.a)(I),Object(r.c)("design:type",Function),Object(r.c)("design:paramtypes",[Object]),Object(r.c)("design:returntype",void 0)],t.prototype,"getUsers",null),Object(r.b)([Object(i.a)($),Object(r.c)("design:type",Function),Object(r.c)("design:paramtypes",[Object]),Object(r.c)("design:returntype",void 0)],t.prototype,"getGameState",null),Object(r.b)([Object(i.a)(E),Object(r.c)("design:type",Function),Object(r.c)("design:paramtypes",[]),Object(r.c)("design:returntype",void 0)],t.prototype,"copyRoomLink",null),Object(r.b)([Object(i.a)(G),Object(r.c)("design:type",Function),Object(r.c)("design:paramtypes",[Object]),Object(r.c)("design:returntype",void 0)],t.prototype,"closeRoom",null),Object(r.b)([Object(i.f)(),Object(r.c)("design:type",Function),Object(r.c)("design:paramtypes",[Object]),Object(r.c)("design:returntype",String)],t,"gameState",null),Object(r.b)([Object(i.f)(),Object(r.c)("design:type",Function),Object(r.c)("design:paramtypes",[Object]),Object(r.c)("design:returntype",String)],t,"roomNumber",null),Object(r.b)([Object(i.f)(),Object(r.c)("design:type",Function),Object(r.c)("design:paramtypes",[Object]),Object(r.c)("design:returntype",Array)],t,"players",null),t=Object(r.b)([Object(i.g)({name:"host",defaults:{roomNumber:null,gameState:j.b.IN_PROGRESS,players:[]}})],t),t})();var B=o("ZTXN"),D=o("jOdJ");class U{constructor(t,e){this.store=t,this.router=e}navigateToHomePage(){this.router.navigateByUrl("/")}hasRoomNumber(){return this.store.select(L.roomNumber).pipe(Object(y.a)((t=>!!t)))}}let Y=(()=>{class t extends U{constructor(t,e){super(t,e),this.discardSubject=new B.a}canActivate(){return this.hasRoomNumber().pipe(Object(y.a)((t=>t)),Object(k.a)((t=>{t||this.navigateToHomePage()})))}canDeactivate(t){return t.showLeaveModal(),this.discardSubject.asObservable().pipe(Object(D.a)())}discard(){this.discardSubject.next(!0),setTimeout((()=>{this.discardSubject.next(!0)}))}keep(){this.discardSubject.next(!1)}}return t.\u0275fac=function(e){return new(e||t)(S.Tb(i.h),S.Tb(a.c))},t.\u0275prov=S.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var z=o("eM/n"),J=o("zpDr"),K=o("M0Hd"),W=o("M8cf"),Z=M.CloseRoom,Q=M.GetGameState,q=M.GetPlayers,X=M.ToggleGameState,tt=M.HostBoardInit,et=M.CopyRoomLink;function ot(t,e){if(1&t&&(S.Nb(0),S.Lb(1,"planning-poker-card",13),S.Zb(2,"async"),S.Mb()),2&t){const t=e.$implicit,o=S.Yb();S.Ab(1),S.ec("boardCard",!0)("gameState",S.ac(2,5,o.gameState$))("card",t.card)("label",t.name)("playerReady",t.status===o.userStatues.VOTED)}}function nt(t,e){1&t&&(S.Nb(0),S.mc(1,"New voting"),S.Mb())}function it(t,e){1&t&&(S.Nb(0),S.mc(1,"Finish Voting"),S.Mb())}function ct(t,e){1&t&&(S.Nb(0),S.mc(1,"Get room link"),S.Mb())}function at(t,e){1&t&&(S.Nb(0),S.mc(1,"Link copied"),S.Mb())}function rt(t,e){if(1&t){const t=S.Qb();S.Pb(0,"div",14),S.Lb(1,"div",15),S.Pb(2,"div",16),S.Pb(3,"p"),S.mc(4," Are you sure to end this session? "),S.Ob(),S.Pb(5,"footer",17),S.Pb(6,"button",11),S.Wb("click",(function(){return S.ic(t),S.Yb().leaveModalAction(!0)})),S.mc(7," YES "),S.Ob(),S.Pb(8,"button",11),S.Wb("click",(function(){return S.ic(t),S.Yb().leaveModalAction(!1)})),S.mc(9," NO "),S.Ob(),S.Ob(),S.Ob(),S.Ob()}if(2&t){const t=S.Yb();S.Ab(6),S.ec("buttonColor",t.buttonColors.ACCENT),S.Ab(2),S.ec("buttonColor",t.buttonColors.ACCENT)}}let st=(()=>{let t=class{constructor(t,e,o,n,i){this.boardGuard=t,this.router=e,this.environmentService=o,this.copyToClipboardService=n,this.store=i,this.gameStates=j.b,this.userStatues=j.c,this.buttonColors=v.a,this.leaveModalVisibilitySubject$=new s.a(!1),this.leaveModalVisibility$=this.leaveModalVisibilitySubject$.asObservable(),this.linkCopiedSubject$=new s.a(!1),this.linkCopied$=this.linkCopiedSubject$.asObservable()}ngOnInit(){this.dispatchOnInitActions(),this.store.dispatch(new tt),this.currentTime$=this.getCurrentTime$()}ngOnDestroy(){this.dispatchOnDestroyActions()}toggleGameState(){this.store.dispatch(new X)}closeRoom(){this.router.navigateByUrl("/")}set leaveModalVisibility(t){this.leaveModalVisibilitySubject$.next(t)}get roomLink(){const t=this.store.selectSnapshot(L.roomNumber);return window.location.origin+"/guest/room-code?code="+t}copyToClipboardRoomLink(){this.store.dispatch(new et),this.copyToClipboardService.copyText(this.roomLink),this.linkCopiedSubject$.next(!0),this.linkCopied$.pipe(function(t,e=l.a){return o=>o.lift(new m(t,e))}(2e3),Object(O.a)((t=>t)),Object(C.b)(this)).subscribe((()=>{this.linkCopiedSubject$.next(!1)}))}showLeaveModal(){this.leaveModalVisibility=!0}closeLeaveModal(){this.leaveModalVisibility=!1}leaveModalAction(t){t?this.boardGuard.discard():this.boardGuard.keep(),this.closeLeaveModal()}beforeUnloadHandler(){if(this.environmentService.production)return!1}dispatchOnInitActions(){this.store.dispatch([new q,new Q])}dispatchOnDestroyActions(){this.store.dispatch(new Z)}getCurrentTime$(){return function(t=0,e=l.a){var o;return o=t,(Object(d.a)(o)||!(o-parseFloat(o)+1>=0)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=l.a),new b.a((o=>(o.add(e.schedule(u,t,{subscriber:o,counter:0,period:t})),o)))}(1e3).pipe(Object(f.a)(null),Object(y.a)((()=>new Date)))}};return t.\u0275fac=function(e){return new(e||t)(S.Kb(Y),S.Kb(a.c),S.Kb(w.a),S.Kb(P),S.Kb(i.h))},t.\u0275cmp=S.Eb({type:t,selectors:[["planning-poker-board"]],hostBindings:function(t,e){1&t&&S.Wb("beforeunload",(function(){return e.beforeUnloadHandler()}),!1,S.hc)},decls:27,vars:26,consts:[[1,"cards"],[4,"ngFor","ngForOf"],[1,"sidebar"],[1,"sidebar-header"],["planningPokerTextFixedWidth",""],[1,"clock",3,"value"],[1,"sidebar-footer"],["planningPokerButton","",1,"toggle-game-state",3,"buttonColor","ngSwitch","click"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["planningPokerButton","",3,"buttonColor","ngSwitch","click"],["planningPokerButton","",3,"buttonColor","click"],["class","modal-container",4,"ngIf"],[3,"boardCard","gameState","card","label","playerReady"],[1,"modal-container"],[1,"modal-overlay"],[1,"modal-content"],[1,"modal-footer"]],template:function(t,e){1&t&&(S.Pb(0,"div",0),S.lc(1,ot,3,7,"ng-container",1),S.Zb(2,"async"),S.Ob(),S.Pb(3,"div",2),S.Pb(4,"header",3),S.Pb(5,"h1"),S.mc(6,"ROOM ID:"),S.Ob(),S.Pb(7,"h2",4),S.mc(8),S.Zb(9,"async"),S.Ob(),S.Lb(10,"planning-poker-text-fixed-width",5),S.Zb(11,"date"),S.Zb(12,"async"),S.Ob(),S.Pb(13,"footer",6),S.Pb(14,"button",7),S.Wb("click",(function(){return e.toggleGameState()})),S.Zb(15,"async"),S.lc(16,nt,2,0,"ng-container",8),S.lc(17,it,2,0,"ng-container",9),S.Ob(),S.Pb(18,"button",10),S.Wb("click",(function(){return e.copyToClipboardRoomLink()})),S.Zb(19,"async"),S.lc(20,ct,2,0,"ng-container",9),S.lc(21,at,2,0,"ng-container",8),S.Ob(),S.Pb(22,"button",11),S.Wb("click",(function(){return e.closeRoom()})),S.Nb(23),S.mc(24,"Close room"),S.Mb(),S.Ob(),S.Ob(),S.Ob(),S.lc(25,rt,10,2,"div",12),S.Zb(26,"async")),2&t&&(S.Ab(1),S.ec("ngForOf",S.ac(2,11,e.players$)),S.Ab(7),S.nc(S.ac(9,13,e.roomNumber$)),S.Ab(2),S.ec("value",S.bc(11,15,S.ac(12,18,e.currentTime$),"HH:mm")),S.Ab(4),S.ec("buttonColor",e.buttonColors.PRIMARY)("ngSwitch",S.ac(15,20,e.gameState$)),S.Ab(2),S.ec("ngSwitchCase",e.gameStates.REVIEW),S.Ab(2),S.ec("buttonColor",e.buttonColors.SECONDARY)("ngSwitch",S.ac(19,22,e.linkCopied$)),S.Ab(3),S.ec("ngSwitchCase",!0),S.Ab(1),S.ec("buttonColor",e.buttonColors.INACTIVE),S.Ab(3),S.ec("ngIf",S.ac(26,24,e.leaveModalVisibility$)))},directives:[n.j,z.a,J.a,K.a,n.l,n.m,n.n,n.k,W.a],pipes:[n.b,n.e],styles:["[_nghost-%COMP%]{padding:0 1.1111111111em;flex-direction:row;flex-wrap:nowrap;align-content:stretch}.cards[_ngcontent-%COMP%], [_nghost-%COMP%]{width:100%;height:100%;display:flex;justify-content:flex-start;align-items:flex-start}.cards[_ngcontent-%COMP%]{order:0;flex:1 1 auto;align-self:auto;flex-direction:row;flex-wrap:wrap;align-content:flex-start;overflow:auto;padding-right:.8333333333em}.cards[_ngcontent-%COMP%]   planning-poker-card[_ngcontent-%COMP%]{margin:2.7777777778em 1% 1%}.sidebar[_ngcontent-%COMP%]{flex:0 0 27%;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-content:stretch;align-items:flex-start;height:100%;padding-top:2.5em;padding-left:.8333333333em}.sidebar[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{order:0;align-self:auto;display:flex}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{flex:1 1 auto;flex-direction:column;width:100%}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8333333333em;letter-spacing:.0833333333em}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.8888888889em}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .clock[_ngcontent-%COMP%]{margin-top:auto;margin-left:auto;color:#fff;font-size:1.8333333333em;font-weight:700}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]{order:0;flex:0 1 auto;align-self:flex-start;width:100%}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:1.6666666667em 0;width:100%}.modal-container[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;z-index:99}.modal-container[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;background:rgba(27,28,42,.8)}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{position:relative;background-color:#f0ca20;color:#1b1c2a;height:11.1111111111em;width:27.7777777778em;padding:1.6666666667em;align-items:center;justify-content:center;display:flex;flex-direction:column}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1111111111em;text-transform:uppercase;font-weight:700}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:auto}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button.planning-poker-button[_ngcontent-%COMP%]{margin:0 .8333333333em;min-width:10em;height:3.3333333333em}"]}),Object(r.b)([Object(i.e)(L.gameState),Object(r.c)("design:type",b.a)],t.prototype,"gameState$",void 0),Object(r.b)([Object(i.e)(L.roomNumber),Object(r.c)("design:type",b.a)],t.prototype,"roomNumber$",void 0),Object(r.b)([Object(i.e)(L.players),Object(r.c)("design:type",b.a)],t.prototype,"players$",void 0),t=Object(r.b)([Object(C.a)()],t),t})();var bt=o("BwBJ"),lt=o("W79N"),dt=M.CreateRoom;const ut=[{path:"wait",component:(()=>{let t=class{constructor(t,e,o){this.router=t,this.store=e,this.$gaService=o}ngOnInit(){this.$gaService.pageView("/host/board"),this.store.dispatch(new dt).pipe(Object(bt.a)(1500),Object(C.b)(this)).subscribe((()=>this.router.navigateByUrl("/host/board")))}};return t.\u0275fac=function(e){return new(e||t)(S.Kb(a.c),S.Kb(i.h),S.Kb(A.a))},t.\u0275cmp=S.Eb({type:t,selectors:[["planning-poker-wait"]],decls:4,vars:0,consts:[[1,"loop-loader"]],template:function(t,e){1&t&&(S.Pb(0,"planning-poker-icon",0),S.mc(1," loop\n"),S.Ob(),S.Pb(2,"p"),S.mc(3,"Creating room..."),S.Ob())},directives:[lt.a],styles:["@keyframes rotate{0%{transform:rotate(1turn)}50%{transform:rotate(180deg)}to{transform:rotate(0deg)}}[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column}p[_ngcontent-%COMP%]{color:#fff;text-transform:uppercase;font-size:1em;font-weight:700}.loop-loader[_ngcontent-%COMP%]     .material-icons{font-size:2.7777777778em;animation-name:rotate;animation-duration:1s;animation-iteration-count:infinite}"]}),t=Object(r.b)([Object(C.a)()],t),t})(),canActivate:[(()=>{class t extends U{constructor(t,e){super(t,e)}canActivate(){return this.hasRoomNumber().pipe(Object(y.a)((t=>!t)),Object(k.a)((t=>{t||this.navigateToHomePage()})))}}return t.\u0275fac=function(e){return new(e||t)(S.Tb(i.h),S.Tb(a.c))},t.\u0275prov=S.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()],data:{animation:"WaitComponent"}},{path:"board",component:st,canActivate:[Y],canDeactivate:[Y],data:{animation:"BoardComponent"}},{path:"**",redirectTo:"wait"}];let pt=(()=>{class t{}return t.\u0275mod=S.Ib({type:t}),t.\u0275inj=S.Hb({factory:function(e){return new(e||t)},imports:[[a.d.forChild(ut)],a.d]}),t})(),mt=(()=>{class t{}return t.\u0275mod=S.Ib({type:t}),t.\u0275inj=S.Hb({factory:function(e){return new(e||t)},imports:[[n.c,pt,c.a,i.d.forFeature([L])]]}),t})()}}]);