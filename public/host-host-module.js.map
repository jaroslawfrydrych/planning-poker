{"version":3,"sources":["./src/app/poker/host/host.module.ts","./src/app/poker/host/wait/wait.guard.ts","./src/app/poker/host/wait/wait.component.ts","./src/app/poker/host/wait/wait.component.html","./src/app/poker/host/host-routing.module.ts","./src/app/poker/host/board/board.component.ts","./src/app/poker/host/board/board.component.html","./src/app/poker/host/board/board.guard.ts"],"names":[],"mappings":"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","file":"host-host-module.js","sourcesContent":["import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { SharedModule } from '../../shared/shared.module';\nimport { BoardComponent } from './board/board.component';\nimport { HostRoutingModule } from './host-routing.module';\nimport { WaitComponent } from './wait/wait.component';\n\n@NgModule({\n  declarations: [BoardComponent, WaitComponent],\n  imports: [\n    CommonModule,\n    HostRoutingModule,\n    SharedModule\n  ]\n})\nexport class HostModule {\n}\n","import { Injectable } from '@angular/core';\nimport { CanActivate, Router } from '@angular/router';\nimport { HostService } from '../host.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WaitGuard implements CanActivate {\n\n  constructor(private hostService: HostService,\n              private router: Router) {\n  }\n\n  canActivate(): boolean {\n    const hasHostRoom: boolean = !!this.hostService.hostRoom;\n\n    if (hasHostRoom) {\n      this.router.navigateByUrl('/');\n    }\n\n    return !hasHostRoom;\n  }\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { RoomInfoInterface } from '@planning-poker/api-interfaces';\nimport { GoogleAnalyticsService } from 'ngx-google-analytics';\nimport { Subject } from 'rxjs';\nimport { delay, takeUntil } from 'rxjs/operators';\nimport { HostService } from '../host.service';\n\n@Component({\n  selector: 'planning-poker-wait',\n  templateUrl: './wait.component.html',\n  styleUrls: ['./wait.component.scss']\n})\nexport class WaitComponent implements OnInit, OnDestroy {\n\n  private destroySubject: Subject<null> = new Subject<null>();\n\n  constructor(private router: Router,\n              private $gaService: GoogleAnalyticsService,\n              private hostService: HostService) {\n  }\n\n  public ngOnInit(): void {\n    this.$gaService.pageView('/host/board');\n\n    this.hostService.createRoom()\n      .pipe(\n        delay(1500),\n        takeUntil(this.destroySubject)\n      )\n      .subscribe((roomInfo: RoomInfoInterface) => {\n        this.hostService.hostRoom = roomInfo.id;\n        this.hostService.gameState = roomInfo.state;\n        this.router.navigateByUrl('/host/board');\n      });\n  }\n\n  public ngOnDestroy(): void {\n    this.destroySubject.next(null);\n  }\n}\n","<planning-poker-icon class=\"loop-loader\">\n  loop\n</planning-poker-icon>\n<p>Creating room...</p>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { BoardComponent } from './board/board.component';\nimport { BoardGuard } from './board/board.guard';\nimport { WaitComponent } from './wait/wait.component';\nimport { WaitGuard } from './wait/wait.guard';\n\nconst routes: Routes = [\n  {\n    path: 'wait',\n    component: WaitComponent,\n    canActivate: [\n      WaitGuard\n    ],\n    data: {\n      animation: 'WaitComponent'\n    }\n  },\n  {\n    path: 'board',\n    component: BoardComponent,\n    canActivate: [\n      BoardGuard\n    ],\n    canDeactivate: [\n      BoardGuard\n    ],\n    data: {\n      animation: 'BoardComponent'\n    }\n  },\n  {\n    path: '**',\n    redirectTo: 'wait'\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class HostRoutingModule {\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Client, ClientType, GameStateBroadcastDto, GameStates, UserStatuses } from '@planning-poker/api-interfaces';\nimport { ButtonColor } from '@shared/button/button-color.enum';\nimport { GoogleAnalyticsService } from 'ngx-google-analytics';\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\nimport { HostService } from '../host.service';\nimport { BoardGuard } from './board.guard';\n\n@Component({\n  selector: 'planning-poker-board',\n  templateUrl: './board.component.html',\n  styleUrls: ['./board.component.scss']\n})\nexport class BoardComponent implements OnInit, OnDestroy {\n\n  public roomId: string;\n  public users$: Observable<Client[]>;\n  public userStatues = UserStatuses;\n  public gameState$: Observable<GameStates>;\n  public gameStates = GameStates;\n  public buttonColors = ButtonColor;\n  public reviewCardsSubject$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n  public currentTime$: Observable<Date>;\n  public leaveModalVisibility$: Observable<boolean>;\n  private destroySubject$: Subject<null>;\n  private leaveModalVisibilitySubject$: BehaviorSubject<boolean>;\n\n  constructor(private hostService: HostService,\n              private activatedRoute: ActivatedRoute,\n              private $gaService: GoogleAnalyticsService,\n              private boardGuard: BoardGuard) {\n    this.destroySubject$ = new Subject<null>();\n    this.leaveModalVisibilitySubject$ = new BehaviorSubject<boolean>(false);\n    this.leaveModalVisibility$ = this.leaveModalVisibilitySubject$.asObservable();\n  }\n\n  public ngOnInit(): void {\n    this.$gaService.pageView('/host/board');\n\n    this.roomId = this.hostService.hostRoom;\n    this.hostService.joinRoom(this.roomId);\n\n    this.users$ = this.hostService.getUsers()\n      .pipe(\n        map((users: Client[]) => {\n          return users.filter((user: Client) => user.type === ClientType.VOTER);\n        })\n      );\n\n    this.currentTime$ = this.hostService.currentTime();\n    this.gameState$ = this.hostService.getGameState()\n      .pipe(\n        map((data: GameStateBroadcastDto) => data.state),\n        tap((gameState: GameStates) => this.handleGameStateChange(gameState))\n      );\n  }\n\n  public ngOnDestroy(): void {\n    this.destroySubject$.next(null);\n  }\n\n  public get leaveModalVisibility(): boolean {\n    return this.leaveModalVisibilitySubject$.getValue();\n  }\n\n  public set leaveModalVisibility(value: boolean) {\n    this.leaveModalVisibilitySubject$.next(value);\n  }\n\n  public toggleGameState(): void {\n    this.hostService.toggleGameState(this.roomId);\n    this.$gaService.event('toggle_game_state', 'host', 'Toggle game state');\n  }\n\n  public showLeaveModal(): void {\n    this.leaveModalVisibility = true;\n  }\n\n  public closeLeaveModal(): void {\n    this.leaveModalVisibility = false;\n  }\n\n  public leaveModalAction(result: boolean): void {\n    if (result) {\n      this.boardGuard.discard();\n    } else {\n      this.boardGuard.keep();\n    }\n\n    this.closeLeaveModal();\n  }\n\n  private handleGameStateChange(gameState: GameStates): void {\n    this.reviewCardsSubject$.next(gameState === GameStates.REVIEW);\n  }\n}\n","<!--<header>\n  <h1>ROOM ID: {{roomId}}</h1>\n  <span class=\"clock\">{{currentTime$ | async | date:'HH:mm'}}</span>\n</header>-->\n\n\n<div class=\"cards\">\n  <ng-container *ngFor=\"let user of users$ | async\">\n    <planning-poker-card [boardCard]=\"true\"\n                         [review]=\"reviewCardsSubject$ | async\"\n                         [card]=\"user.card\"\n                         [label]=\"user.name\"\n                         [playerReady]=\"user.status === userStatues.VOTED\"></planning-poker-card>\n  </ng-container>\n</div>\n\n<div class=\"sidebar\">\n  <header class=\"sidebar-header\">\n    <h1>ROOM ID: {{roomId}}</h1>\n  </header>\n  <footer class=\"sidebar-footer\">\n    <button planningPokerButton\n            class=\"toggle-game-state\"\n            [buttonColor]=\"buttonColors.SECONDARY\"\n            [ngSwitch]=\"gameState$ | async\"\n            (click)=\"toggleGameState()\">\n      <ng-container *ngSwitchCase=\"gameStates.REVIEW\">New voting</ng-container>\n      <ng-container *ngSwitchDefault>Finish Voting</ng-container>\n    </button>\n  </footer>\n</div>\n\n<div class=\"modal-container\"\n     *ngIf=\"leaveModalVisibility$ | async\">\n  <div class=\"modal-overlay\"></div>\n  <div class=\"modal-content\">\n    <p>\n      Are you sure to end this session?\n    </p>\n    <footer class=\"modal-footer\">\n      <button planningPokerButton\n              [buttonColor]=\"buttonColors.ACCENT\"\n              (click)=\"leaveModalAction(true)\">\n        YES\n      </button>\n      <button planningPokerButton\n              [buttonColor]=\"buttonColors.ACCENT\"\n              (click)=\"leaveModalAction(false)\">\n        NO\n      </button>\n    </footer>\n  </div>\n</div>\n","import { Injectable } from '@angular/core';\nimport { CanActivate, CanDeactivate, Router } from '@angular/router';\nimport { Observable, Subject } from 'rxjs';\nimport { first, tap } from 'rxjs/operators';\nimport { HostService } from '../host.service';\nimport { BoardComponent } from './board.component';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class BoardGuard implements CanActivate, CanDeactivate<BoardComponent> {\n\n  private discardSubject: Subject<boolean> = new Subject<boolean>();\n\n  constructor(private router: Router,\n              private hostService: HostService) {\n  }\n\n  public canActivate(): boolean {\n    const hasHostRoom: boolean = !!this.hostService.hostRoom;\n\n    if (!hasHostRoom) {\n      this.router.navigateByUrl('/');\n    }\n\n    return !!this.hostService.hostRoom;\n  }\n\n  public canDeactivate(component: BoardComponent): Observable<boolean> {\n    component.showLeaveModal();\n\n    return this.discardSubject.asObservable()\n      .pipe(\n        first()\n      );\n  }\n\n  public discard(): void {\n    this.discardSubject.next(true);\n\n    setTimeout(() => {\n      this.discardSubject.next(true);\n    });\n  }\n\n  public keep(): void {\n    this.discardSubject.next(false);\n  }\n}\n"],"sourceRoot":"webpack:///"}