(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"1gqn":function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},KKCa:function(e,t){e.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},MCLT:function(e,t,n){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},o=/%[sdj%]/g;t.format=function(e){if(!h(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,a=r.length,c=String(e).replace(o,function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),s=r[n];n<a;s=r[++n])g(s)||!j(s)?c+=" "+s:c+=" "+i(s);return c},t.deprecate=function(e,n){if("undefined"!=typeof process&&!0===process.noDeprecation)return e;if("undefined"==typeof process)return function(){return t.deprecate(e,n).apply(this,arguments)};var r=!1;return function(){if(!r){if(process.throwDeprecation)throw new Error(n);process.traceDeprecation?console.trace(n):console.error(n),r=!0}return e.apply(this,arguments)}};var a,c={};function i(e,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(n)?r.showHidden=n:n&&t._extend(r,n),f(r.showHidden)&&(r.showHidden=!1),f(r.depth)&&(r.depth=2),f(r.colors)&&(r.colors=!1),f(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),l(r,e,r.depth)}function s(e,t){var n=i.styles[t];return n?"\x1b["+i.colors[n][0]+"m"+e+"\x1b["+i.colors[n][1]+"m":e}function u(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&R(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return h(o)||(o=l(e,o,r)),o}var a=function(e,t){if(f(t))return e.stylize("undefined","undefined");if(h(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}(e,n);if(a)return a;var c=Object.keys(n),i=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(c);if(e.showHidden&&(c=Object.getOwnPropertyNames(n)),S(n)&&(c.indexOf("message")>=0||c.indexOf("description")>=0))return b(n);if(0===c.length){if(R(n))return e.stylize("[Function"+(n.name?": "+n.name:"")+"]","special");if(O(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(v(n))return e.stylize(Date.prototype.toString.call(n),"date");if(S(n))return b(n)}var s,u="",j=!1,C=["{","}"];return d(n)&&(j=!0,C=["[","]"]),R(n)&&(u=" [Function"+(n.name?": "+n.name:"")+"]"),O(n)&&(u=" "+RegExp.prototype.toString.call(n)),v(n)&&(u=" "+Date.prototype.toUTCString.call(n)),S(n)&&(u=" "+b(n)),0!==c.length||j&&0!=n.length?r<0?O(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),s=j?function(e,t,n,r,o){for(var a=[],c=0,i=t.length;c<i;++c)N(t,String(c))?a.push(p(e,t,n,r,String(c),!0)):a.push("");return o.forEach(function(o){o.match(/^\d+$/)||a.push(p(e,t,n,r,o,!0))}),a}(e,n,r,i,c):c.map(function(t){return p(e,n,r,i,t,j)}),e.seen.pop(),function(e,t,n){return e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(s,u,C)):C[0]+u+C[1]}function b(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,o,a){var c,i,s;if((s=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?i=e.stylize(s.set?"[Getter/Setter]":"[Getter]","special"):s.set&&(i=e.stylize("[Setter]","special")),N(r,o)||(c="["+o+"]"),i||(e.seen.indexOf(s.value)<0?(i=g(n)?l(e,s.value,null):l(e,s.value,n-1)).indexOf("\n")>-1&&(i=a?i.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+i.split("\n").map(function(e){return"   "+e}).join("\n")):i=e.stylize("[Circular]","special")),f(c)){if(a&&o.match(/^\d+$/))return i;(c=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(c=c.substr(1,c.length-2),c=e.stylize(c,"name")):(c=c.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),c=e.stylize(c,"string"))}return c+": "+i}function d(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function y(e){return"number"==typeof e}function h(e){return"string"==typeof e}function f(e){return void 0===e}function O(e){return j(e)&&"[object RegExp]"===C(e)}function j(e){return"object"==typeof e&&null!==e}function v(e){return j(e)&&"[object Date]"===C(e)}function S(e){return j(e)&&("[object Error]"===C(e)||e instanceof Error)}function R(e){return"function"==typeof e}function C(e){return Object.prototype.toString.call(e)}function w(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(f(a)&&(a=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!c[e])if(new RegExp("\\b"+e+"\\b","i").test(a)){var n=process.pid;c[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else c[e]=function(){};return c[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=m,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=h,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=f,t.isRegExp=O,t.isObject=j,t.isDate=v,t.isError=S,t.isFunction=R,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n("1gqn");var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(){var e=new Date,t=[w(e.getHours()),w(e.getMinutes()),w(e.getSeconds())].join(":");return[e.getDate(),I[e.getMonth()],t].join(" ")}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",P(),t.format.apply(t,arguments))},t.inherits=n("KKCa"),t._extend=function(e,t){if(!t||!j(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var G="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function $(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(G&&e[G]){var t;if("function"!=typeof(t=e[G]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,G,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise(function(e,r){t=e,n=r}),o=[],a=0;a<arguments.length;a++)o.push(arguments[a]);o.push(function(e,r){e?n(e):t(r)});try{e.apply(this,o)}catch(c){n(c)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),G&&Object.defineProperty(t,G,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=G,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var r=t.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return r.apply(o,arguments)};e.apply(this,t).then(function(e){process.nextTick(a,null,e)},function(e){process.nextTick($,e,a)})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,r(e)),t}},qKOM:function(e,t,n){"use strict";n.r(t),n.d(t,"GuestModule",function(){return Me});var r,o=n("ofXK"),a=n("3Pt+"),c=n("AcyG"),i=n("jmwG"),s=n("HYn3"),u=n("T1jq"),l=n("tyNb"),b=n("mrSG"),p=n("l5mm"),d=n("HDdC"),m=n("lJxs"),g=n("5+tZ"),y=n("IzEk"),h=n("pLZG"),f=n("MCLT"),O=n("w4Ql"),j=n("5qii"),v=n("GMPE"),S=n("Cj2y"),R=n("em8+"),C=n("Ucnj"),w=n("y6Sd");!function(e){class t{}t.type="[GuestActions] Initialize guest room number validation",e.GuestRoomNumberValidationInit=t;class n{}n.type="[GuestActions] Guest name init",e.GuestNameInit=n;class r{}r.type="[GuestActions] Initialize guest game",e.GuestGameInit=r;class o{constructor(e){this.roomNumber=e}}o.type="[GuestActions] Room number validation",e.RoomNumberValidation=o;class a{constructor(e){this.name=e}}a.type="[GuestActions] Join room",e.JoinRoom=a;class c{constructor(e){this.payload=e}}c.type="[GuestActions] Set room info",e.SetRoomInfo=c;class i{constructor(e){this.card=e}}i.type="[GuestActions] Choose card",e.ChooseCard=i;class s{}s.type="[GuestActions] Get game state",e.GetGameState=s;class u{}u.type="[GuestActions] Get room remove",e.GetRoomRemove=u;class l{}l.type="[GuestActions] Get players results",e.GetPlayersResults=l;class b{}b.type="[GuestActions] Remove room",e.RemoveRoom=b;class p{}p.type="[GuestActions] Leave room",e.LeaveRoom=p;class d{}d.type="[GuestActions] Get is player in room",e.GetIsPlayerInRoom=d}(r||(r={}));var I=n("Wdmj"),P=n("vkgz"),N=n("1G5W"),G=n("X4VB"),$=n("fXoL"),k=r.JoinRoom,M=r.ChooseCard,E=r.GuestGameInit,x=r.RoomNumberValidation,V=r.GuestRoomNumberValidationInit,_=r.GuestNameInit,F=r.GetGameState,A=r.LeaveRoom,T=r.RemoveRoom,z=r.SetRoomInfo,Q=r.GetRoomRemove,D=r.GetPlayersResults,L=r.GetIsPlayerInRoom;let U=(()=>{let e=class{constructor(e,t,n){this.$gaService=e,this.guestService=t,this.actions$=n}static isRoomNumberValid(e){return e.isRoomNumberValid}static roomNumber(e){return e.roomNumber}static hasRoomNumber(e){return!!e.roomNumber}static card(e){return e.card}static gameState(e){return e.gameState}static availableCards(e){return e.availableCards}static players(e){return Array.from(e.players.values())}guestRoomNumberValidationInit(){this.$gaService.pageView("/guest/room-code")}guestNameInit(){this.$gaService.pageView("/guest/your-name")}guestGameInit(){this.$gaService.pageView("/guest/game"),this.guestService.roomJoined()}roomCode(e,{roomNumber:t}){return this.guestService.validateRoomNumber(t).pipe(Object(m.a)(e=>e.valid),Object(P.a)(n=>{const r=e.getState();n?(this.$gaService.event("code_enter_valid","guest","Enter code valid"),e.setState(Object.assign(Object.assign({},r),{roomNumber:t,isRoomNumberValid:n}))):(this.$gaService.event("code_enter_invalid","guest","Enter code invalid"),e.setState(Object.assign(Object.assign({},r),{isRoomNumberValid:n})))}))}joinRoom(e,{name:t}){const n=e.getState();this.guestService.joinRoom(t,n.roomNumber),e.setState(Object.assign(Object.assign({},n),{name:t}))}setRoomInfo(e,{payload:t}){const n=e.getState();e.setState(Object.assign(Object.assign({},n),{gameState:t.gameState,availableCards:this.guestService.availableCards}))}getGameState(e){this.guestService.getGameState().pipe(Object(N.a)(this.actions$.pipe(Object(c.j)(A,T)))).subscribe(t=>{const n=e.getState();e.setState(Object.assign(Object.assign({},n),t===O.b.IN_PROGRESS?{gameState:t,card:null}:{gameState:t}))})}getPlayersResults(e){this.guestService.getResults().pipe(Object(N.a)(this.actions$.pipe(Object(c.j)(A,T)))).subscribe(t=>{const n=new Map;Object.keys(t).forEach(e=>{n.set(e,{id:e,name:t[e].name,card:t[e].card})}),e.patchState({players:n})})}getRoomRemove(e){this.guestService.roomRemove().pipe(Object(N.a)(this.actions$.pipe(Object(c.j)(A,T)))).subscribe(()=>{e.dispatch(new T)})}chooseCard(e,{card:t}){this.$gaService.event("user_voted","guest","User voted");const n=e.getState();n.gameState!==O.b.REVIEW&&(this.guestService.chooseCard(t,n.roomNumber),e.patchState({card:t}))}leaveRoom(){this.$gaService.event("user_leave_room","guest","User leved room"),this.guestService.leaveRoom()}resetRoom({patchState:e}){e({name:null,card:null,gameState:null,isRoomNumberValid:null,roomNumber:null,availableCards:[],players:new Map})}getIsPlayerInRoom(e){const t=e.getState();return this.guestService.getIsPlayerInRoom(t.roomNumber)}};return e.\u0275fac=function(t){return new(t||e)($.Vb(I.a),$.Vb(w.a),$.Vb(c.b))},e.\u0275prov=$.Ib({token:e,factory:e.\u0275fac}),Object(b.b)([Object(c.a)(V),Object(b.c)("design:type",Function),Object(b.c)("design:paramtypes",[]),Object(b.c)("design:returntype",void 0)],e.prototype,"guestRoomNumberValidationInit",null),Object(b.b)([Object(c.a)(_),Object(b.c)("design:type",Function),Object(b.c)("design:paramtypes",[]),Object(b.c)("design:returntype",void 0)],e.prototype,"guestNameInit",null),Object(b.b)([Object(c.a)(E),Object(b.c)("design:type",Function),Object(b.c)("design:paramtypes",[]),Object(b.c)("design:returntype",void 0)],e.prototype,"guestGameInit",null),Object(b.b)([Object(c.a)(x),Object(b.c)("design:type",Function),Object(b.c)("design:paramtypes",[Object,Object]),Object(b.c)("design:returntype",d.a)],e.prototype,"roomCode",null),Object(b.b)([Object(c.a)(k),Object(b.c)("design:type",Function),Object(b.c)("design:paramtypes",[Object,Object]),Object(b.c)("design:returntype",void 0)],e.prototype,"joinRoom",null),Object(b.b)([Object(c.a)(z),Object(b.c)("design:type",Function),Object(b.c)("design:paramtypes",[Object,Object]),Object(b.c)("design:returntype",void 0)],e.prototype,"setRoomInfo",null),Object(b.b)([Object(c.a)(F),Object(b.c)("design:type",Function),Object(b.c)("design:paramtypes",[Object]),Object(b.c)("design:returntype",void 0)],e.prototype,"getGameState",null),Object(b.b)([Object(c.a)(D),Object(b.c)("design:type",Function),Object(b.c)("design:paramtypes",[Object]),Object(b.c)("design:returntype",void 0)],e.prototype,"getPlayersResults",null),Object(b.b)([Object(c.a)(Q),Object(b.c)("design:type",Function),Object(b.c)("design:paramtypes",[Object]),Object(b.c)("design:returntype",void 0)],e.prototype,"getRoomRemove",null),Object(b.b)([Object(c.a)(M),Object(b.c)("design:type",Function),Object(b.c)("design:paramtypes",[Object,Object]),Object(b.c)("design:returntype",void 0)],e.prototype,"chooseCard",null),Object(b.b)([Object(c.a)(A),Object(b.c)("design:type",Function),Object(b.c)("design:paramtypes",[]),Object(b.c)("design:returntype",void 0)],e.prototype,"leaveRoom",null),Object(b.b)([Object(c.a)([T,A]),Object(b.c)("design:type",Function),Object(b.c)("design:paramtypes",[Object]),Object(b.c)("design:returntype",void 0)],e.prototype,"resetRoom",null),Object(b.b)([Object(c.a)(L),Object(b.c)("design:type",Function),Object(b.c)("design:paramtypes",[Object]),Object(b.c)("design:returntype",d.a)],e.prototype,"getIsPlayerInRoom",null),Object(b.b)([Object(c.f)(),Object(b.c)("design:type",Function),Object(b.c)("design:paramtypes",[Object]),Object(b.c)("design:returntype",Boolean)],e,"isRoomNumberValid",null),Object(b.b)([Object(c.f)(),Object(b.c)("design:type",Function),Object(b.c)("design:paramtypes",[Object]),Object(b.c)("design:returntype",String)],e,"roomNumber",null),Object(b.b)([Object(c.f)(),Object(b.c)("design:type",Function),Object(b.c)("design:paramtypes",[Object]),Object(b.c)("design:returntype",Boolean)],e,"hasRoomNumber",null),Object(b.b)([Object(c.f)(),Object(b.c)("design:type",Function),Object(b.c)("design:paramtypes",[Object]),Object(b.c)("design:returntype",Object)],e,"card",null),Object(b.b)([Object(c.f)(),Object(b.c)("design:type",Function),Object(b.c)("design:paramtypes",[Object]),Object(b.c)("design:returntype",String)],e,"gameState",null),Object(b.b)([Object(c.f)(),Object(b.c)("design:type",Function),Object(b.c)("design:paramtypes",[Object]),Object(b.c)("design:returntype",Array)],e,"availableCards",null),Object(b.b)([Object(c.f)(),Object(b.c)("design:type",Function),Object(b.c)("design:paramtypes",[Object]),Object(b.c)("design:returntype",Array)],e,"players",null),e=Object(b.b)([Object(c.g)({name:G.a.GUEST,defaults:{name:null,card:null,gameState:null,isRoomNumberValid:null,roomNumber:null,availableCards:[],players:new Map}}),Object(b.c)("design:paramtypes",[I.a,w.a,c.b])],e),e})();var J=n("VfLo");let B=(()=>{class e extends j.a{}return e.\u0275fac=function(t){return K(t||e)},e.\u0275cmp=$.Gb({type:e,selectors:[["planning-poker-modal-game-results-review"]],features:[$.zb],decls:3,vars:3,consts:[[3,"gameState$","cardsInRow","players$"]],template:function(e,t){1&e&&($.Rb(0,"h1"),$.pc(1,"Voting results"),$.Qb(),$.Nb(2,"planning-poker-table",0)),2&e&&($.Cb(2),$.gc("gameState$",t.modalData.gameState$)("cardsInRow",t.modalData.cardsInRow)("players$",t.modalData.players$))},directives:[J.a],styles:["h1[_ngcontent-%COMP%]{padding:0 1% 1%;align-self:flex-start;font-size:38.4}"]}),e})();const K=$.Tb(B);var q=n("hYD9"),H=n("YYOn"),Y=n("+MAH"),W=n("imtw"),Z=r.ChooseCard,X=r.GuestGameInit,ee=r.GetGameState,te=r.RemoveRoom,ne=r.LeaveRoom,re=r.GetRoomRemove,oe=r.GetPlayersResults;function ae(e,t){if(1&e){const e=$.Sb();$.Pb(0),$.Rb(1,"planning-poker-card-container"),$.Rb(2,"button",3),$.Yb("click",function(){$.kc(e);const n=t.$implicit;return $.ac().onCardClick(n)}),$.bc(3,"async"),$.Qb(),$.Rb(4,"planning-poker-card-item"),$.bc(5,"async"),$.bc(6,"async"),$.Nb(7,"planning-poker-card-symbol",4),$.Qb(),$.Qb(),$.Ob()}if(2&e){const e=t.$implicit,n=$.ac();$.Cb(2),$.Eb("card-selected",$.cc(3,7,n.isCardSelected(e))),$.Cb(2),$.Eb("card-selected",$.cc(5,9,n.isCardSelected(e)))("card-not-selected",$.cc(6,11,n.isCardNotSelected(e))),$.Cb(3),$.gc("card",e)}}let ce=(()=>{let e=class{constructor(e,t,n,r,o,a,c){this.router=e,this.guestService=t,this.actions$=n,this.store=r,this.appService=o,this.environmentService=a,this.modalService=c}get isInReview$(){return this.gameState$.pipe(Object(m.a)(e=>e===O.b.REVIEW))}ngOnInit(){this.store.dispatch([new X,new ee,new re,new oe]),this.cards=this.store.selectSnapshot(U.availableCards),this.actions$.pipe(Object(c.k)(te),Object(v.d)(this)).subscribe(()=>this.navigateToLadingPage()),this.handleSocketEvents(),this.handleIntervalPlayerCheck(),this.handleGameStateChange()}ngOnDestroy(){this.store.dispatch(ne),this.navigateToLadingPage()}onCardClick(e){this.store.selectSnapshot(U.gameState)!==O.b.REVIEW&&this.store.dispatch(new Z(e))}isCardSelected(e){return this.card$.pipe(Object(m.a)(t=>t===e))}isCardNotSelected(e){return this.card$.pipe(Object(m.a)(t=>!Object(f.isNullOrUndefined)(t)&&t!==e))}beforeUnloadHandler(){if(this.environmentService.production)return!1}navigateToLadingPage(){this.router.navigateByUrl("/")}handleSocketEvents(){this.appService.reconnectFailed$.pipe(Object(v.d)(this)).subscribe(()=>this.navigateToLadingPage()),this.appService.connect$.pipe(Object(g.a)(()=>this.roomNumber$),Object(y.a)(1),Object(g.a)(e=>this.guestService.getIsPlayerInRoom(e)),Object(h.a)(e=>!e),Object(v.d)(this)).subscribe(()=>this.navigateToLadingPage())}getIfIsStillPlayerInRoom(e){return this.guestService.getIsPlayerInRoom(e).pipe(Object(h.a)(e=>!e))}handleIntervalPlayerCheck(){Object(p.a)(3e4).pipe(Object(g.a)(()=>this.connectionStatus$.pipe(Object(y.a)(1))),Object(h.a)(e=>e===v.b.CONNECTED),Object(g.a)(()=>this.roomNumber$.pipe(Object(y.a)(1))),Object(g.a)(e=>this.getIfIsStillPlayerInRoom(e)),Object(v.d)(this)).subscribe(()=>this.handleConnectionFailed())}handleConnectionFailed(){this.router.navigateByUrl("/?reconnectFailed=true"),this.modalService.alert("Connection error!").subscribe()}handleGameStateChange(){this.gameState$.pipe(Object(m.a)(e=>e===O.b.REVIEW),Object(v.d)(this)).subscribe(e=>{e?this.resultsModal=this.modalService.open(B,{disableClose:!0,wrapperClassName:"game-results-modal-wrapper",containerClassName:"game-results-modal-container",data:{players$:this.players$,gameState$:this.gameState$,cardsInRow:7}}):this.resultsModal&&this.resultsModal.instance.closeModal()})}};return e.\u0275fac=function(t){return new(t||e)($.Mb(l.c),$.Mb(w.a),$.Mb(c.b),$.Mb(c.h),$.Mb(C.a),$.Mb(S.a),$.Mb(j.c))},e.\u0275cmp=$.Gb({type:e,selectors:[["planning-poker-game"]],hostBindings:function(e,t){1&e&&$.Yb("beforeunload",function(){return t.beforeUnloadHandler()},!1,$.jc)},decls:6,vars:4,consts:[[1,"header"],[1,"cards"],[4,"ngFor","ngForOf"],["haxitRipple","",3,"click"],[3,"card"]],template:function(e,t){1&e&&($.Rb(0,"div",0),$.Rb(1,"h1"),$.pc(2),$.bc(3,"async"),$.Qb(),$.Qb(),$.Rb(4,"div",1),$.oc(5,ae,8,13,"ng-container",2),$.Qb()),2&e&&($.Cb(2),$.rc("Room ",$.cc(3,2,t.roomNumber$),""),$.Cb(3),$.gc("ngForOf",t.cards))},directives:[o.j,q.a,H.a,Y.a,W.a],pipes:[o.b],styles:['[_nghost-%COMP%]{padding:1.6666666667em;display:flex;align-items:flex-start;flex-direction:column;width:100%;height:100%}.header[_ngcontent-%COMP%]{margin:0 1% 1%}.cards[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:row;flex-wrap:wrap}.cards[_ngcontent-%COMP%]   planning-poker-card-container[_ngcontent-%COMP%]{width:12.2857142857%}.cards[_ngcontent-%COMP%]   planning-poker-card-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:.6666666667em;position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;z-index:1;cursor:pointer;-webkit-appearance:none;border-style:none;background:transparent;transition:opacity .5s ease,transform .25s ease;overflow:hidden}.cards[_ngcontent-%COMP%]   planning-poker-card-container[_ngcontent-%COMP%]   button.card-selected[_ngcontent-%COMP%], .cards[_ngcontent-%COMP%]   planning-poker-card-container[_ngcontent-%COMP%]   planning-poker-card-item.card-selected[_ngcontent-%COMP%]{transform:scale(1.075)}.cards[_ngcontent-%COMP%]   planning-poker-card-container[_ngcontent-%COMP%]   planning-poker-card-item.card-not-selected[_ngcontent-%COMP%]{opacity:.4}.sidebar[_ngcontent-%COMP%]{width:35%;padding:1.3888888889em}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:1.1111111111em 0;display:block}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0;padding:.1111111111em 0;display:block;list-style:none}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"- "}  body .modal-wrapper.game-results-modal-wrapper{height:90%;width:90%}  body .modal-wrapper.game-results-modal-wrapper .modal-container.game-results-modal-container{width:100%;height:100%;background-color:#1b1c2a;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:center;align-content:stretch;align-items:stretch}  body .modal-wrapper.game-results-modal-wrapper .modal-container.game-results-modal-container>*{width:100%;height:100%}']}),Object(b.b)([Object(c.e)(U.card),Object(b.c)("design:type",d.a)],e.prototype,"card$",void 0),Object(b.b)([Object(c.e)(U.roomNumber),Object(b.c)("design:type",d.a)],e.prototype,"roomNumber$",void 0),Object(b.b)([Object(c.e)(U.gameState),Object(b.c)("design:type",d.a)],e.prototype,"gameState$",void 0),Object(b.b)([Object(c.e)(U.players),Object(b.c)("design:type",d.a)],e.prototype,"players$",void 0),Object(b.b)([Object(c.e)(R.a.connectionStatus),Object(b.c)("design:type",d.a)],e.prototype,"connectionStatus$",void 0),e=Object(b.b)([Object(v.c)(),Object(b.c)("design:paramtypes",[l.c,w.a,c.b,c.h,C.a,S.a,j.c])],e),e})(),ie=(()=>{class e{constructor(e,t,n){this.store=e,this.guestService=t,this.router=n}canActivate(){return this.store.select(U.hasRoomNumber).pipe(Object(P.a)(e=>{e||this.router.navigateByUrl("/")}))}}return e.\u0275fac=function(t){return new(t||e)($.Vb(c.h),$.Vb(w.a),$.Vb(l.c))},e.\u0275prov=$.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var se=r.SetRoomInfo;let ue=(()=>{class e{constructor(e,t){this.guestService=e,this.store=t}resolve(){return this.guestService.getRoomInfo(this.store.selectSnapshot(U.roomNumber)).pipe(Object(P.a)(e=>this.store.dispatch(new se(e))))}}return e.\u0275fac=function(t){return new(t||e)($.Vb(w.a),$.Vb(c.h))},e.\u0275prov=$.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var le=n("2Vo4"),be=n("nYR2"),pe=n("3E0/"),de=n("KJ1h"),me=n("eAS9"),ge=n("KRHO"),ye=n("uDbP"),he=r.RoomNumberValidation,fe=r.GuestRoomNumberValidationInit;function Oe(e,t){1&e&&($.Pb(0),$.Rb(1,"h1"),$.pc(2,"Join to exsiting room"),$.Qb(),$.Ob())}function je(e,t){1&e&&($.Pb(0),$.Rb(1,"h1",2),$.pc(2,"Planning Poker"),$.Qb(),$.Rb(3,"h2"),$.pc(4,"Join to exsiting room"),$.Qb(),$.Ob())}let ve=(()=>{let e=class{constructor(e,t,n,r){this.router=e,this.store=t,this.$gaService=n,this.activatedRoute=r,this.queryRoomCode=null,this.loadingSubject$=new le.a(!1),this.successSubject$=new le.a(!1),this.errorSubject$=new le.a(!1),this.loading$=this.loadingSubject$.asObservable(),this.success$=this.successSubject$.asObservable(),this.error$=this.errorSubject$.asObservable()}ngOnInit(){this.store.dispatch(new fe),this.handleQueryParams()}onRoomNumberSubmit(e){this.loadingSubject$.getValue()||(this.loadingSubject$.next(!0),this.store.dispatch(new he(e)).pipe(Object(be.a)(()=>this.loadingSubject$.next(!1)),Object(g.a)(()=>this.store.select(U.isRoomNumberValid)),Object(P.a)(e=>{e?this.successSubject$.next(!0):this.errorSubject$.next(!0)}),Object(pe.a)(1e3),Object(P.a)(()=>this.errorSubject$.next(!1)),Object(v.d)(this)).subscribe(e=>this.handleRoomNumberValidation(e)))}handleRoomNumberValidation(e){e?this.router.navigateByUrl("/guest/your-name"):this.codeComponent.reset()}handleQueryParams(){const e=this.activatedRoute.snapshot.queryParams;e.code&&(this.queryRoomCode=e.code)}};return e.\u0275fac=function(t){return new(t||e)($.Mb(l.c),$.Mb(c.h),$.Mb(I.a),$.Mb(l.a))},e.\u0275cmp=$.Gb({type:e,selectors:[["planning-poker-room-code"]],viewQuery:function(e,t){if(1&e&&$.sc(de.a,!0),2&e){let e;$.hc(e=$.Zb())&&(t.codeComponent=e.first)}},decls:6,vars:7,consts:[[4,"ngIf"],[3,"codeLength","value","isLoading$","isSuccess$","isError$","codeSubmit"],[1,"main-landing-header"]],template:function(e,t){1&e&&($.Rb(0,"planning-poker-layout"),$.Rb(1,"planning-poker-header"),$.oc(2,Oe,3,0,"ng-container",0),$.oc(3,je,5,0,"ng-container",0),$.Qb(),$.Rb(4,"planning-poker-content"),$.Rb(5,"planning-poker-code",1),$.Yb("codeSubmit",function(e){return t.onRoomNumberSubmit(e)}),$.Qb(),$.Qb(),$.Qb()),2&e&&($.Cb(2),$.gc("ngIf",!t.queryRoomCode),$.Cb(1),$.gc("ngIf",t.queryRoomCode),$.Cb(2),$.gc("codeLength",5)("value",t.queryRoomCode)("isLoading$",t.loading$)("isSuccess$",t.success$)("isError$",t.error$))},directives:[me.a,ge.a,o.k,ye.a,de.a],styles:[""],changeDetection:0}),e=Object(b.b)([Object(v.c)(),Object(b.c)("design:paramtypes",[l.c,c.h,I.a,l.a])],e),e})(),Se=(()=>{class e{constructor(e,t){this.store=e,this.router=t}canActivate(){return this.store.select(U.hasRoomNumber).pipe(Object(m.a)(e=>!e||(this.router.navigateByUrl("/"),!1)))}}return e.\u0275fac=function(t){return new(t||e)($.Vb(c.h),$.Vb(l.c))},e.\u0275prov=$.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Re=n("LVl4"),Ce=n("YTju"),we=n("LSTl"),Ie=n("5dTU"),Pe=n("IIXh"),Ne=r.JoinRoom,Ge=r.GuestNameInit;const $e=[{path:"room-code",component:ve,canActivate:[Se],data:{animation:"RoomCodeComponent"}},{path:"your-name",component:(()=>{let e=class{constructor(e,t,n){this.formBuilder=e,this.router=t,this.store=n,this.buttonColor=s.a,this.userNameLocalStorageItemKey="user-name"}ngOnInit(){this.store.dispatch(new Ge);const e=localStorage.getItem(this.userNameLocalStorageItemKey);this.formGroup=this.formBuilder.group({name:this.formBuilder.control(e||null,[a.j.required])})}get nameFormControl(){return this.formGroup.get("name")}submit(){this.formGroup.valid&&(localStorage.setItem(this.userNameLocalStorageItemKey,this.nameFormControl.value),this.store.dispatch(new Ne(this.nameFormControl.value)).pipe(Object(v.d)(this)).subscribe(()=>this.router.navigateByUrl("/guest/game")))}};return e.\u0275fac=function(t){return new(t||e)($.Mb(a.b),$.Mb(l.c),$.Mb(c.h))},e.\u0275cmp=$.Gb({type:e,selectors:[["planning-poker-your-name"]],decls:11,vars:2,consts:[[3,"formGroup"],["type","text","formControlName","name","planningPokerFocus","","planningPokerInput",""],["haxit-button","","small","",1,"submit-button",3,"buttonColor","click"]],template:function(e,t){1&e&&($.Rb(0,"planning-poker-layout"),$.Rb(1,"planning-poker-header"),$.Rb(2,"h1"),$.pc(3,"Introduce yourself"),$.Qb(),$.Qb(),$.Rb(4,"planning-poker-content"),$.Rb(5,"planning-poker-form-container"),$.Rb(6,"form",0),$.Nb(7,"input",1),$.Rb(8,"button",2),$.Yb("click",function(){return t.submit()}),$.Rb(9,"haxit-icon"),$.pc(10," arrow_forward "),$.Qb(),$.Qb(),$.Qb(),$.Qb(),$.Qb(),$.Qb()),2&e&&($.Cb(6),$.gc("formGroup",t.formGroup),$.Cb(2),$.gc("buttonColor",t.buttonColor.TRANSPARENT))},directives:[me.a,ge.a,ye.a,Re.a,a.k,a.h,a.e,a.a,a.g,a.d,Ce.a,we.a,Ie.a,Pe.a],encapsulation:2,changeDetection:0}),e=Object(b.b)([Object(v.c)(),Object(b.c)("design:paramtypes",[a.b,l.c,c.h])],e),e})(),canActivate:[(()=>{class e{constructor(e,t){this.store=e,this.router=t}canActivate(){return this.store.select(U.hasRoomNumber).pipe(Object(P.a)(e=>{e||this.router.navigateByUrl("/")}))}}return e.\u0275fac=function(t){return new(t||e)($.Vb(c.h),$.Vb(l.c))},e.\u0275prov=$.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()],data:{animation:"YourNameComponent"}},{path:"game",component:ce,canActivate:[ie],resolve:{data:ue},data:{animation:"GameComponent"}},{path:"**",redirectTo:"room-code"}];let ke=(()=>{class e{}return e.\u0275mod=$.Kb({type:e}),e.\u0275inj=$.Jb({factory:function(t){return new(t||e)},imports:[[l.d.forChild($e)],l.d]}),e})(),Me=(()=>{class e{}return e.\u0275mod=$.Kb({type:e}),e.\u0275inj=$.Jb({factory:function(t){return new(t||e)},imports:[[o.c,ke,s.c,u.a,a.i,c.d.forFeature([U]),i.a]]}),e})()}}]);