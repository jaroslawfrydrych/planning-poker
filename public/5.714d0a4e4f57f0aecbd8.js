(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{GM61:function(e,t,n){"use strict";n.r(t),n.d(t,"GuestModule",(function(){return G}));var r=n("2kYt"),o=n("nIj0"),i=n("PCNd"),a=n("sEIs"),s=n("C05f"),c=n("ZTXN"),u=n("kuMc"),d=n("l3rL"),l=n("lQSW"),b=n("EM62"),g=n("PKRn"),h=n("M8cf");function p(e,t){if(1&e){const e=b.Qb();b.Nb(0),b.Pb(1,"planning-poker-card",3),b.Wb("cardClick",(function(){b.ic(e);const n=t.$implicit;return b.Yb().onCardClick(n)})),b.Ob(),b.Mb()}if(2&e){const e=t.$implicit,n=b.Yb();b.Ab(1),b.ec("card",e)("selected$",n.selectedCard$)}}let m=(()=>{class e{constructor(e,t,n,r,o){this.guestService=e,this.changeDetectorRef=t,this.activatedRoute=n,this.router=r,this.$gaService=o,this.inReview=!1,this.cards=[d.a.ZERO,d.a.HALF,d.a.ONE,d.a.TWO,d.a.THREE,d.a.FIVE,d.a.EIGHT,d.a.THIRTEEN,d.a.TWENTY,d.a.FORTY,d.a.HUNDRED,d.a.QUESTION_MARK,d.a.COFFEE,d.a.INFINITE],this.selectedCardValueSubject$=new s.a(null),this.destroySubject$=new c.a,this.selectedCard$=this.selectedCardValueSubject$.asObservable()}ngOnInit(){this.$gaService.pageView("/guest/game"),this.inReview=this.activatedRoute.snapshot.data.data.gameState===d.b.REVIEW,this.guestService.getGameState().pipe(Object(u.a)(this.destroySubject$)).subscribe((e=>this.handleGameState(e))),this.guestService.onRoomRemove().pipe(Object(u.a)(this.destroySubject$)).subscribe((()=>this.handleRoomRemove()))}ngOnDestroy(){this.destroySubject$.next(null)}set selectedCard(e){this.inReview||(this.selectedCardValueSubject$.next(e),this.guestService.sendCard(e))}onCardClick(e){this.$gaService.event("user_voted","guest","User voted"),this.selectedCard=e}handleGameState(e){this.inReview=e===d.b.REVIEW,e===d.b.IN_PROGRESS&&(this.selectedCardValueSubject$.next(null),this.changeDetectorRef.detectChanges())}handleRoomRemove(){this.router.navigateByUrl("/"),this.guestService.guestRoom=null}}return e.\u0275fac=function(t){return new(t||e)(b.Kb(l.a),b.Kb(b.i),b.Kb(a.a),b.Kb(a.c),b.Kb(g.a))},e.\u0275cmp=b.Eb({type:e,selectors:[["planning-poker-game"]],decls:4,vars:1,consts:[[1,"cards"],[4,"ngFor","ngForOf"],[1,"sidebar"],[3,"card","selected$","cardClick"]],template:function(e,t){1&e&&(b.Pb(0,"div",0),b.lc(1,p,2,2,"ng-container",1),b.Ob(),b.Pb(2,"div",2),b.mc(3," TODO :)\n"),b.Ob()),2&e&&(b.Ab(1),b.ec("ngForOf",t.cards))},directives:[r.j,h.a],styles:['[_nghost-%COMP%]{padding:1.6666666667em;display:flex;align-items:flex-start;width:100%;height:100%}.cards[_ngcontent-%COMP%]{display:flex;width:65%;flex-direction:row;flex-wrap:wrap}.cards[_ngcontent-%COMP%]   planning-poker-card[_ngcontent-%COMP%]{margin:1%}.sidebar[_ngcontent-%COMP%]{width:35%;padding:1.3888888889em}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:1.1111111111em 0;display:block}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0;padding:.1111111111em 0;display:block;list-style:none}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"- "}']}),e})(),v=(()=>{class e{constructor(e,t){this.guestService=e,this.router=t}canActivate(){const e=!!this.guestService.guestRoom;return e||this.router.navigateByUrl("/"),e}}return e.\u0275fac=function(t){return new(t||e)(b.Tb(l.a),b.Tb(a.c))},e.\u0275prov=b.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),f=(()=>{class e{constructor(e){this.guestService=e}resolve(){return this.guestService.getRoomInfo()}}return e.\u0275fac=function(t){return new(t||e)(b.Tb(l.a))},e.\u0275prov=b.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var S=n("ruxD"),O=n("8j5Y"),$=n("BwBJ"),y=n("ur7N"),C=n("rqBn"),j=n("6EaX"),w=n("hi3J");let R=(()=>{class e{constructor(e,t,n,r){this.router=e,this.guestService=t,this.$gaService=n,this.activatedRoute=r,this.queryRoomCode=null,this.loadingSubject$=new s.a(!1),this.successSubject$=new s.a(!1),this.errorSubject$=new s.a(!1),this.destroySubject$=new c.a,this.loading$=this.loadingSubject$.asObservable(),this.success$=this.successSubject$.asObservable(),this.error$=this.errorSubject$.asObservable()}ngOnInit(){this.$gaService.pageView("/guest/room-code");const e=this.activatedRoute.snapshot.queryParams;e.code&&(this.queryRoomCode=e.code)}ngOnDestroy(){this.destroySubject$.next(null)}onCodeSubmit(e){this.loadingSubject$.getValue()||(this.loadingSubject$.next(!0),this.guestService.checkCode(e).pipe(Object(u.a)(this.destroySubject$),Object(S.a)((()=>this.loadingSubject$.next(!1))),Object(O.a)((e=>{this.loadingSubject$.next(!1),e.valid?this.successSubject$.next(!0):this.errorSubject$.next(!0)})),Object($.a)(1e3),Object(O.a)((()=>this.errorSubject$.next(!1)))).subscribe((e=>{e.valid?(this.router.navigateByUrl("/guest/your-name"),this.$gaService.event("code_enter_valid","guest","Enter code valid")):(this.codeComponent.reset(),this.$gaService.event("code_enter_invalid","guest","Enter code invalid"))})))}}return e.\u0275fac=function(t){return new(t||e)(b.Kb(a.c),b.Kb(l.a),b.Kb(g.a),b.Kb(a.a))},e.\u0275cmp=b.Eb({type:e,selectors:[["planning-poker-room-code"]],viewQuery:function(e,t){var n;1&e&&b.pc(y.a,!0),2&e&&b.fc(n=b.Xb())&&(t.codeComponent=n.first)},decls:6,vars:5,consts:[[3,"codeLength","value","isLoading$","isSuccess$","isError$","codeSubmit"]],template:function(e,t){1&e&&(b.Pb(0,"planning-poker-layout"),b.Pb(1,"planning-poker-header"),b.Pb(2,"h1"),b.mc(3,"Join to exsiting room"),b.Ob(),b.Ob(),b.Pb(4,"planning-poker-content"),b.Pb(5,"planning-poker-code",0),b.Wb("codeSubmit",(function(e){return t.onCodeSubmit(e)})),b.Ob(),b.Ob(),b.Ob()),2&e&&(b.Ab(5),b.ec("codeLength",5)("value",t.queryRoomCode)("isLoading$",t.loading$)("isSuccess$",t.success$)("isError$",t.error$))},directives:[C.a,j.a,w.a,y.a],styles:[""],changeDetection:0}),e})(),P=(()=>{class e{constructor(e,t){this.guestService=e,this.router=t}canActivate(){const e=!this.guestService.guestRoom;return e||this.router.navigateByUrl("/"),e}}return e.\u0275fac=function(t){return new(t||e)(b.Tb(l.a),b.Tb(a.c))},e.\u0275prov=b.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var k=n("dN4T"),E=n("sRyt"),I=n("d7z7"),M=n("M0Hd"),T=n("W79N");const _=[{path:"room-code",component:R,canActivate:[P],data:{animation:"RoomCodeComponent"}},{path:"your-name",component:(()=>{class e{constructor(e,t,n,r){this.formBuilder=e,this.guestService=t,this.router=n,this.$gaService=r}ngOnInit(){this.$gaService.pageView("/guest/your-name"),this.formGroup=this.formBuilder.group({name:this.formBuilder.control(null,[o.j.required])})}get nameFormControl(){return this.formGroup.get("name")}submit(){this.formGroup.valid&&(this.guestService.joinRoom(this.nameFormControl.value),this.router.navigateByUrl("/guest/game"))}}return e.\u0275fac=function(t){return new(t||e)(b.Kb(o.b),b.Kb(l.a),b.Kb(a.c),b.Kb(g.a))},e.\u0275cmp=b.Eb({type:e,selectors:[["planning-poker-your-name"]],decls:11,vars:1,consts:[[3,"formGroup"],["type","text","formControlName","name","planningPokerFocus","","planningPokerInput",""],["planningPokerButton","",3,"click"]],template:function(e,t){1&e&&(b.Pb(0,"planning-poker-layout"),b.Pb(1,"planning-poker-header"),b.Pb(2,"h1"),b.mc(3,"Introduce yourself"),b.Ob(),b.Ob(),b.Pb(4,"planning-poker-content"),b.Pb(5,"planning-poker-form-container"),b.Pb(6,"form",0),b.Lb(7,"input",1),b.Pb(8,"button",2),b.Wb("click",(function(){return t.submit()})),b.Pb(9,"planning-poker-icon"),b.mc(10," arrow_forward "),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Ob()),2&e&&(b.Ab(6),b.ec("formGroup",t.formGroup))},directives:[C.a,j.a,w.a,k.a,o.k,o.h,o.e,o.a,o.g,o.d,E.a,I.a,M.a,T.a],styles:[""],changeDetection:0}),e})(),canActivate:[(()=>{class e{constructor(e,t){this.guestService=e,this.router=t}canActivate(){const e=!!this.guestService.guestRoom;return e||this.router.navigateByUrl("/"),e}}return e.\u0275fac=function(t){return new(t||e)(b.Tb(l.a),b.Tb(a.c))},e.\u0275prov=b.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()],data:{animation:"YourNameComponent"}},{path:"game",component:m,canActivate:[v],resolve:{data:f},data:{animation:"GameComponent"}},{path:"**",redirectTo:"room-code"}];let x=(()=>{class e{}return e.\u0275mod=b.Ib({type:e}),e.\u0275inj=b.Hb({factory:function(t){return new(t||e)},imports:[[a.d.forChild(_)],a.d]}),e})(),G=(()=>{class e{}return e.\u0275mod=b.Ib({type:e}),e.\u0275inj=b.Hb({factory:function(t){return new(t||e)},imports:[[r.c,x,i.a,o.i]]}),e})()}}]);