(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{AzuZ:function(e,t,s){"use strict";var o;s.d(t,"a",(function(){return o})),function(e){class t{}t.type="[HostActions] Create room",e.CreateRoom=t;class s{}s.type="[HostActions] Toggle Game State",e.ToggleGameState=s;class o{}o.type="[HostActions] Fetch Votes",e.FetchVotes=o;class c{constructor(e){this.gameState=e}}c.type="[HostActions] Set game state",e.SetGameState=c;class r{constructor(e){this.users=e}}r.type="[HostActions] Set game users",e.SetGameUsers=r}(o||(o={}))},BwBJ:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var o=s("Efrr"),c=s("5uGe"),r=s("ryP2");function i(e,t=o.a){var s;const c=(s=e)instanceof Date&&!isNaN(+s)?+e-t.now():Math.abs(e);return e=>e.lift(new n(c,t))}class n{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new a(e,this.delay,this.scheduler))}}class a extends c.a{constructor(e,t,s){super(e),this.delay=t,this.scheduler=s,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,s=t.queue,o=e.scheduler,c=e.destination;for(;s.length>0&&s[0].time-o.now()<=0;)s.shift().notification.observe(c);if(s.length>0){const t=Math.max(0,s[0].time-o.now());this.schedule(e,t)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(a.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,s=new u(t.now()+this.delay,e);this.queue.push(s),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(r.a.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(r.a.createComplete()),this.unsubscribe()}}class u{constructor(e,t){this.time=e,this.notification=t}}},Efrr:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var o=s("EWqr");const c=new(s("DG/E").a)(o.a)},IOsE:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var o=s("D57K"),c=s("yDe4"),r=s("IdLP"),i=s("8j5Y"),n=s("l3rL"),a=s("PJjB"),u=s("AzuZ"),h=s("EM62"),b=u.a.CreateRoom,m=u.a.SetGameState,p=u.a.ToggleGameState,d=u.a.SetGameUsers;let l=(()=>{let e=class{constructor(e){this.pokerService=e}static gameState(e){return e.gameState}static roomNumber(e){return e.room}static users(e){return e.users}createRoom(e){return this.pokerService.createRoom().pipe(Object(i.a)((t=>{const s=e.getState();e.setState(Object.assign(Object.assign({},s),{room:t.id,gameState:t.gameState}))})))}toggleHostState(e){const t=e.getState();this.pokerService.toggleGameState(t.room)}setGameState(e,{gameState:t}){const s=e.getState();e.setState(Object.assign(Object.assign({},s),{gameState:t}))}setGameUsers(e,{users:t}){const s=e.getState();e.setState(Object.assign(Object.assign({},s),{users:t}))}};return e.\u0275fac=function(t){return new(t||e)(h.Tb(a.a))},e.\u0275prov=h.Gb({token:e,factory:e.\u0275fac}),Object(o.b)([Object(c.a)(b),Object(o.c)("design:type",Function),Object(o.c)("design:paramtypes",[Object]),Object(o.c)("design:returntype",r.a)],e.prototype,"createRoom",null),Object(o.b)([Object(c.a)(p),Object(o.c)("design:type",Function),Object(o.c)("design:paramtypes",[Object]),Object(o.c)("design:returntype",void 0)],e.prototype,"toggleHostState",null),Object(o.b)([Object(c.a)(m),Object(o.c)("design:type",Function),Object(o.c)("design:paramtypes",[Object,Object]),Object(o.c)("design:returntype",void 0)],e.prototype,"setGameState",null),Object(o.b)([Object(c.a)(d),Object(o.c)("design:type",Function),Object(o.c)("design:paramtypes",[Object,Object]),Object(o.c)("design:returntype",void 0)],e.prototype,"setGameUsers",null),Object(o.b)([Object(c.e)(),Object(o.c)("design:type",Function),Object(o.c)("design:paramtypes",[Object]),Object(o.c)("design:returntype",String)],e,"gameState",null),Object(o.b)([Object(c.e)(),Object(o.c)("design:type",Function),Object(o.c)("design:paramtypes",[Object]),Object(o.c)("design:returntype",String)],e,"roomNumber",null),Object(o.b)([Object(c.e)(),Object(o.c)("design:type",Function),Object(o.c)("design:paramtypes",[Object]),Object(o.c)("design:returntype",Array)],e,"users",null),e=Object(o.b)([Object(c.f)({name:"host",defaults:{room:null,gameState:n.b.IN_PROGRESS,users:[]}})],e),e})()},PJjB:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var o=s("YtkY"),c=s("l3rL"),r=s("EM62"),i=s("d7Fm"),n=s("vobO");let a=(()=>{class e{constructor(e,t){this.socket=e,this.httpClient=t}createRoom(){return this.httpClient.post("/api/create-room",{clientId:this.socket.ioSocket.id})}sendVote(e){this.socket.emit(c.e.VOTE,e)}toggleGameState(e){this.socket.emit(c.e.STATE,e)}receiveGameState(){return this.socket.fromEvent(c.e.STATE).pipe(Object(o.a)((e=>e.state)))}getUsers(){return this.socket.fromEvent(c.e.PLAYERS).pipe(Object(o.a)((e=>e.players)),Object(o.a)((e=>e.filter((e=>e.type===c.d.VOTER)))))}joinRoom(e,t,s){this.socket.emit(c.e.JOIN,{name:s,room:e,type:t})}checkRoomCode(e){return this.httpClient.post("/api/join-room-code",{id:e})}getRoomInfo(e){return this.httpClient.post("/api/room-info",{id:e})}onRoomRemove(){return this.socket.fromEvent(c.e.ROOM_REMOVED)}}return e.\u0275fac=function(t){return new(t||e)(r.Tb(i.a),r.Tb(n.a))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},lQSW:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var o=s("C05f"),c=s("BwBJ"),r=s("8j5Y"),i=s("l3rL"),n=s("PJjB"),a=s("EM62");let u=(()=>{class e{constructor(e){this.pokerService=e,this.guestRoomSubject$=new o.a(null)}get guestRoom(){return this.guestRoomSubject$.getValue()}set guestRoom(e){this.guestRoomSubject$.next(e)}checkCode(e){return this.pokerService.checkRoomCode(e).pipe(Object(c.a)(500),Object(r.a)((t=>{t.valid&&(this.guestRoom=e)})))}sendCard(e){this.pokerService.sendVote({card:e,room:this.guestRoom})}getGameState(){return this.pokerService.receiveGameState()}joinRoom(e){this.pokerService.joinRoom(this.guestRoom,i.d.VOTER,e)}getRoomInfo(){return this.pokerService.getRoomInfo(this.guestRoom)}onRoomRemove(){return this.pokerService.onRoomRemove()}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(n.a))},e.\u0275prov=a.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);