(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"1FB5":function(t,e,n){"use strict";n.r(e),n.d(e,"HostModule",(function(){return nt}));var o=n("2kYt"),i=n("yDe4"),a=n("PCNd"),r=n("sEIs"),c=n("D57K"),s=n("C05f"),l=n("IdLP"),b=n("Efrr"),d=n("FU6l");function u(t){const{subscriber:e,counter:n,period:o}=t;e.next(n),this.schedule({subscriber:e,counter:n+1,period:o},o)}var h=n("5uGe");class p{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new m(t,this.dueTime,this.scheduler))}}class m extends h.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(g,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function g(t){t.debouncedNext()}var f=n("xVbo"),O=n("jIqt"),C=n("YtkY"),v=n("l3rL"),y=n("ybPn"),P=n("QvUv"),M=n("EM62");let w=(()=>{class t{copyText(t){const e=this.createInputElement();e.style.opacity="0",e.style["text-indent"]="-9999px",document.body.appendChild(e),this.setInputValue(e,t),this.selectInput(e),document.execCommand("copy"),this.removeElement(e)}createInputElement(){return document.createElement("input")}selectInput(t){t.select(),t.setSelectionRange(0,99999)}setInputValue(t,e){t.value=e}removeElement(t){t.blur(),t.remove()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=M.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var x=n("jJz7"),j=n("AzuZ"),k=n("IOsE"),S=n("ZTXN"),_=n("8j5Y"),A=n("jOdJ");class T{constructor(t,e){this.store=t,this.router=e}navigateToHomePage(){this.router.navigateByUrl("/")}hasRoomNumber(){return this.store.select(k.a.roomNumber).pipe(Object(C.a)((t=>!!t)))}}let I=(()=>{class t extends T{constructor(t,e){super(t,e),this.discardSubject=new S.a}canActivate(){return this.hasRoomNumber().pipe(Object(C.a)((t=>t)),Object(_.a)((t=>{t||this.navigateToHomePage()})))}canDeactivate(t){return t.showLeaveModal(),this.discardSubject.asObservable().pipe(Object(A.a)())}discard(){this.discardSubject.next(!0),setTimeout((()=>{this.discardSubject.next(!0)}))}keep(){this.discardSubject.next(!1)}}return t.\u0275fac=function(e){return new(e||t)(M.Tb(i.h),M.Tb(r.c))},t.\u0275prov=M.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var N=n("eM/n"),$=n("zpDr"),V=n("M0Hd"),E=n("M8cf"),R=j.a.CloseRoom,D=j.a.GetGameState,L=j.a.GetPlayers,G=j.a.ToggleGameState,B=j.a.HostBoardInit,H=j.a.CopyRoomLink;function Y(t,e){if(1&t&&(M.Nb(0),M.Lb(1,"planning-poker-card",13),M.Zb(2,"async"),M.Mb()),2&t){const t=e.$implicit,n=M.Yb();M.Ab(1),M.ec("boardCard",!0)("gameState",M.ac(2,5,n.gameState$))("card",t.card)("label",t.name)("playerReady",t.status===n.userStatues.VOTED)}}function z(t,e){1&t&&(M.Nb(0),M.mc(1,"New voting"),M.Mb())}function K(t,e){1&t&&(M.Nb(0),M.mc(1,"Finish Voting"),M.Mb())}function W(t,e){1&t&&(M.Nb(0),M.mc(1,"Get room link"),M.Mb())}function Z(t,e){1&t&&(M.Nb(0),M.mc(1,"Link copied"),M.Mb())}function F(t,e){if(1&t){const t=M.Qb();M.Pb(0,"div",14),M.Lb(1,"div",15),M.Pb(2,"div",16),M.Pb(3,"p"),M.mc(4," Are you sure to end this session? "),M.Ob(),M.Pb(5,"footer",17),M.Pb(6,"button",11),M.Wb("click",(function(){return M.ic(t),M.Yb().leaveModalAction(!0)})),M.mc(7," YES "),M.Ob(),M.Pb(8,"button",11),M.Wb("click",(function(){return M.ic(t),M.Yb().leaveModalAction(!1)})),M.mc(9," NO "),M.Ob(),M.Ob(),M.Ob(),M.Ob()}if(2&t){const t=M.Yb();M.Ab(6),M.ec("buttonColor",t.buttonColors.ACCENT),M.Ab(2),M.ec("buttonColor",t.buttonColors.ACCENT)}}let U=(()=>{let t=class{constructor(t,e,n,o,i){this.boardGuard=t,this.router=e,this.environmentService=n,this.copyToClipboardService=o,this.store=i,this.gameStates=v.b,this.userStatues=v.c,this.buttonColors=y.a,this.leaveModalVisibilitySubject$=new s.a(!1),this.leaveModalVisibility$=this.leaveModalVisibilitySubject$.asObservable(),this.linkCopiedSubject$=new s.a(!1),this.linkCopied$=this.linkCopiedSubject$.asObservable()}ngOnInit(){this.dispatchOnInitActions(),this.store.dispatch(new B),this.currentTime$=this.getCurrentTime$()}ngOnDestroy(){this.dispatchOnDestroyActions()}toggleGameState(){this.store.dispatch(new G)}closeRoom(){this.router.navigateByUrl("/")}set leaveModalVisibility(t){this.leaveModalVisibilitySubject$.next(t)}get roomLink(){const t=this.store.selectSnapshot(k.a.roomNumber);return window.location.origin+"/guest/room-code?code="+t}copyToClipboardRoomLink(){this.store.dispatch(new H),this.copyToClipboardService.copyText(this.roomLink),this.linkCopiedSubject$.next(!0),this.linkCopied$.pipe(function(t,e=b.a){return n=>n.lift(new p(t,e))}(2e3),Object(f.a)((t=>t)),Object(P.b)(this)).subscribe((()=>{this.linkCopiedSubject$.next(!1)}))}showLeaveModal(){this.leaveModalVisibility=!0}closeLeaveModal(){this.leaveModalVisibility=!1}leaveModalAction(t){t?this.boardGuard.discard():this.boardGuard.keep(),this.closeLeaveModal()}beforeUnloadHandler(){if(this.environmentService.production)return!1}dispatchOnInitActions(){this.store.dispatch([new L,new D])}dispatchOnDestroyActions(){this.store.dispatch(new R)}getCurrentTime$(){return function(t=0,e=b.a){var n;return n=t,(Object(d.a)(n)||!(n-parseFloat(n)+1>=0)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=b.a),new l.a((n=>(n.add(e.schedule(u,t,{subscriber:n,counter:0,period:t})),n)))}(1e3).pipe(Object(O.a)(null),Object(C.a)((()=>new Date)))}};return t.\u0275fac=function(e){return new(e||t)(M.Kb(I),M.Kb(r.c),M.Kb(x.a),M.Kb(w),M.Kb(i.h))},t.\u0275cmp=M.Eb({type:t,selectors:[["planning-poker-board"]],hostBindings:function(t,e){1&t&&M.Wb("beforeunload",(function(){return e.beforeUnloadHandler()}),!1,M.hc)},decls:27,vars:26,consts:[[1,"cards"],[4,"ngFor","ngForOf"],[1,"sidebar"],[1,"sidebar-header"],["planningPokerTextFixedWidth",""],[1,"clock",3,"value"],[1,"sidebar-footer"],["planningPokerButton","",1,"toggle-game-state",3,"buttonColor","ngSwitch","click"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["planningPokerButton","",3,"buttonColor","ngSwitch","click"],["planningPokerButton","",3,"buttonColor","click"],["class","modal-container",4,"ngIf"],[3,"boardCard","gameState","card","label","playerReady"],[1,"modal-container"],[1,"modal-overlay"],[1,"modal-content"],[1,"modal-footer"]],template:function(t,e){1&t&&(M.Pb(0,"div",0),M.lc(1,Y,3,7,"ng-container",1),M.Zb(2,"async"),M.Ob(),M.Pb(3,"div",2),M.Pb(4,"header",3),M.Pb(5,"h1"),M.mc(6,"ROOM ID:"),M.Ob(),M.Pb(7,"h2",4),M.mc(8),M.Zb(9,"async"),M.Ob(),M.Lb(10,"planning-poker-text-fixed-width",5),M.Zb(11,"date"),M.Zb(12,"async"),M.Ob(),M.Pb(13,"footer",6),M.Pb(14,"button",7),M.Wb("click",(function(){return e.toggleGameState()})),M.Zb(15,"async"),M.lc(16,z,2,0,"ng-container",8),M.lc(17,K,2,0,"ng-container",9),M.Ob(),M.Pb(18,"button",10),M.Wb("click",(function(){return e.copyToClipboardRoomLink()})),M.Zb(19,"async"),M.lc(20,W,2,0,"ng-container",9),M.lc(21,Z,2,0,"ng-container",8),M.Ob(),M.Pb(22,"button",11),M.Wb("click",(function(){return e.closeRoom()})),M.Nb(23),M.mc(24,"Close room"),M.Mb(),M.Ob(),M.Ob(),M.Ob(),M.lc(25,F,10,2,"div",12),M.Zb(26,"async")),2&t&&(M.Ab(1),M.ec("ngForOf",M.ac(2,11,e.players$)),M.Ab(7),M.nc(M.ac(9,13,e.roomNumber$)),M.Ab(2),M.ec("value",M.bc(11,15,M.ac(12,18,e.currentTime$),"HH:mm")),M.Ab(4),M.ec("buttonColor",e.buttonColors.PRIMARY)("ngSwitch",M.ac(15,20,e.gameState$)),M.Ab(2),M.ec("ngSwitchCase",e.gameStates.REVIEW),M.Ab(2),M.ec("buttonColor",e.buttonColors.SECONDARY)("ngSwitch",M.ac(19,22,e.linkCopied$)),M.Ab(3),M.ec("ngSwitchCase",!0),M.Ab(1),M.ec("buttonColor",e.buttonColors.INACTIVE),M.Ab(3),M.ec("ngIf",M.ac(26,24,e.leaveModalVisibility$)))},directives:[o.j,N.a,$.a,V.a,o.l,o.m,o.n,o.k,E.a],pipes:[o.b,o.e],styles:["[_nghost-%COMP%]{padding:0 1.1111111111em;flex-direction:row;flex-wrap:nowrap;align-content:stretch}.cards[_ngcontent-%COMP%], [_nghost-%COMP%]{width:100%;height:100%;display:flex;justify-content:flex-start;align-items:flex-start}.cards[_ngcontent-%COMP%]{order:0;flex:1 1 auto;align-self:auto;flex-direction:row;flex-wrap:wrap;align-content:flex-start;overflow:auto;padding-right:.8333333333em}.cards[_ngcontent-%COMP%]   planning-poker-card[_ngcontent-%COMP%]{margin:2.7777777778em 1% 1%}.sidebar[_ngcontent-%COMP%]{flex:0 0 27%;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-content:stretch;align-items:flex-start;height:100%;padding-top:2.5em;padding-left:.8333333333em}.sidebar[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{order:0;align-self:auto;display:flex}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{flex:1 1 auto;flex-direction:column;width:100%}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8333333333em;letter-spacing:.0833333333em}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.8888888889em}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .clock[_ngcontent-%COMP%]{margin-top:auto;margin-left:auto;color:#fff;font-size:1.8333333333em;font-weight:700}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]{order:0;flex:0 1 auto;align-self:flex-start;width:100%}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:1.6666666667em 0;width:100%}.modal-container[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;z-index:99}.modal-container[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;background:rgba(27,28,42,.8)}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{position:relative;background-color:#f0ca20;color:#1b1c2a;height:11.1111111111em;width:27.7777777778em;padding:1.6666666667em;align-items:center;justify-content:center;display:flex;flex-direction:column}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1111111111em;text-transform:uppercase;font-weight:700}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:auto}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button.planning-poker-button[_ngcontent-%COMP%]{margin:0 .8333333333em;min-width:10em;height:3.3333333333em}"]}),Object(c.b)([Object(i.e)(k.a.gameState),Object(c.c)("design:type",l.a)],t.prototype,"gameState$",void 0),Object(c.b)([Object(i.e)(k.a.roomNumber),Object(c.c)("design:type",l.a)],t.prototype,"roomNumber$",void 0),Object(c.b)([Object(i.e)(k.a.players),Object(c.c)("design:type",l.a)],t.prototype,"players$",void 0),t=Object(c.b)([Object(P.a)()],t),t})();var J=n("BwBJ"),Q=n("PKRn"),q=n("W79N"),X=j.a.CreateRoom;const tt=[{path:"wait",component:(()=>{let t=class{constructor(t,e,n){this.router=t,this.store=e,this.$gaService=n}ngOnInit(){this.$gaService.pageView("/host/board"),this.store.dispatch(new X).pipe(Object(J.a)(1500),Object(P.b)(this)).subscribe((()=>this.router.navigateByUrl("/host/board")))}};return t.\u0275fac=function(e){return new(e||t)(M.Kb(r.c),M.Kb(i.h),M.Kb(Q.a))},t.\u0275cmp=M.Eb({type:t,selectors:[["planning-poker-wait"]],decls:4,vars:0,consts:[[1,"loop-loader"]],template:function(t,e){1&t&&(M.Pb(0,"planning-poker-icon",0),M.mc(1," loop\n"),M.Ob(),M.Pb(2,"p"),M.mc(3,"Creating room..."),M.Ob())},directives:[q.a],styles:["@keyframes rotate{0%{transform:rotate(1turn)}50%{transform:rotate(180deg)}to{transform:rotate(0deg)}}[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column}p[_ngcontent-%COMP%]{color:#fff;text-transform:uppercase;font-size:1em;font-weight:700}.loop-loader[_ngcontent-%COMP%]     .material-icons{font-size:2.7777777778em;animation-name:rotate;animation-duration:1s;animation-iteration-count:infinite}"]}),t=Object(c.b)([Object(P.a)()],t),t})(),canActivate:[(()=>{class t extends T{constructor(t,e){super(t,e)}canActivate(){return this.hasRoomNumber().pipe(Object(C.a)((t=>!t)),Object(_.a)((t=>{t||this.navigateToHomePage()})))}}return t.\u0275fac=function(e){return new(e||t)(M.Tb(i.h),M.Tb(r.c))},t.\u0275prov=M.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()],data:{animation:"WaitComponent"}},{path:"board",component:U,canActivate:[I],canDeactivate:[I],data:{animation:"BoardComponent"}},{path:"**",redirectTo:"wait"}];let et=(()=>{class t{}return t.\u0275mod=M.Ib({type:t}),t.\u0275inj=M.Hb({factory:function(e){return new(e||t)},imports:[[r.d.forChild(tt)],r.d]}),t})(),nt=(()=>{class t{}return t.\u0275mod=M.Ib({type:t}),t.\u0275inj=M.Hb({factory:function(e){return new(e||t)},imports:[[o.c,et,a.a,i.d.forFeature([k.a])]]}),t})()}}]);